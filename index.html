<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>âœ¨ äºŒåå…«æ˜Ÿå®¿æµ‹ç®— âœ¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', 'Noto Serif SC', serif;
            background: linear-gradient(180deg, #0a0a1a 0%, #1a1a3e 30%, #2d1b69 70%, #0f0f23 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }
        
        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        /* æµæ˜Ÿ */
        .shooting-star {
            position: absolute;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #fff, transparent);
            animation: shoot 3s linear infinite;
            opacity: 0;
        }
        
        @keyframes shoot {
            0% { transform: translateX(-100px) translateY(100px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateX(100vw) translateY(-100px); opacity: 0; }
        }
        
        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 1;
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* æ ‡é¢˜ */
        .header {
            text-align: center;
            padding: 30px 0;
        }
        
        .title {
            font-size: 2.2em;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffaa00, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px;
            letter-spacing: 8px;
        }
        
        .subtitle {
            color: #888;
            font-size: 0.9em;
            letter-spacing: 2px;
        }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        /* æ—¥æœŸç±»å‹åˆ‡æ¢ */
        .date-type-toggle {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .toggle-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: #888;
            font-size: 1em;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            letter-spacing: 2px;
        }
        
        .toggle-btn.active {
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);
            color: #1a1a3e;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        
        /* è¾“å…¥ç»„ */
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1em;
            letter-spacing: 2px;
        }
        
        .date-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1.1em;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }
        
        .date-input:focus {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        /* å†œå†é€‰æ‹©å™¨æ ·å¼ */
        .lunar-selector {
            display: none;
        }
        
        .lunar-selector.active {
            display: block;
        }
        
        .lunar-row {
            display: grid;
            grid-template-columns: 1fr 1fr 80px;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .lunar-row.three-col {
            grid-template-columns: 1fr 1fr 1fr;
        }
        
        .lunar-select {
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1.1em;
            text-align: center;
            outline: none;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .lunar-select:focus {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .lunar-select option {
            background: #1a1a3e;
            color: #fff;
        }
        
        /* é—°æœˆå¤é€‰æ¡† */
        .leap-month-check {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .leap-month-check:hover {
            border-color: rgba(255, 215, 0, 0.5);
        }
        
        .leap-month-check input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            accent-color: #ffd700;
            cursor: pointer;
        }
        
        .leap-month-check label {
            color: #ccc;
            cursor: pointer;
            font-size: 0.95em;
        }
        
        .leap-month-check.checked {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
        }
        
        /* é˜³å†é€‰æ‹©å™¨ */
        .solar-selector {
            display: none;
        }
        
        .solar-selector.active {
            display: block;
        }
        
        /* æ—¥æœŸæ˜¾ç¤ºä¿¡æ¯ */
        .date-info {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
            color: #ffd700;
            font-size: 0.95em;
        }
        
        .date-info.hidden {
            display: none;
        }
        
        /* æµ‹ç®—æŒ‰é’® */
        .calc-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 50%, #ffd700 100%);
            color: #1a1a3e;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 4px;
            margin-top: 10px;
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
        }
        
        .calc-btn:active {
            transform: translateY(0);
        }
        
        /* ç»“æœåŒºåŸŸ */
        .result-section {
            display: none;
            animation: fadeIn 0.8s ease;
        }
        
        .result-section.show {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* æ˜Ÿå®¿å¡ç‰‡ */
        .star-card {
            background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,170,0,0.05) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            border-radius: 24px;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .star-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .star-icon {
            font-size: 4em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .star-name {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .star-pinyin {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .star-animal {
            display: inline-block;
            background: rgba(255, 215, 0, 0.2);
            padding: 8px 20px;
            border-radius: 20px;
            color: #ffd700;
            font-size: 0.9em;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .star-meaning {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            position: relative;
            z-index: 1;
        }
        
        .meaning-title {
            color: #ffd700;
            font-size: 1em;
            margin-bottom: 10px;
            border-left: 3px solid #ffd700;
            padding-left: 10px;
        }
        
        .meaning-text {
            color: #ccc;
            line-height: 1.8;
            font-size: 0.95em;
        }
        
        .star-fortune {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        
        .fortune-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px 10px;
            border-radius: 12px;
            text-align: center;
        }
        
        .fortune-label {
            color: #888;
            font-size: 0.8em;
            margin-bottom: 5px;
        }
        
        .fortune-value {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* é‡æµ‹æŒ‰é’® */
        .reset-btn {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 12px;
            background: transparent;
            color: #ffd700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .reset-btn:hover {
            background: rgba(255, 215, 0, 0.1);
        }
        
        /* åˆ†äº«æŒ‰é’® */
        .share-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* åº•éƒ¨ */
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
            font-size: 0.8em;
            margin-top: auto;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* äºŒåå…«æ˜Ÿå®¿åˆ—è¡¨ */
        .star-list {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }
        
        .star-item {
            text-align: center;
            padding: 8px 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            font-size: 0.75em;
            color: #888;
        }
        
        .star-item.active {
            background: rgba(255, 215, 0, 0.3);
            color: #ffd700;
            font-weight: bold;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 400px) {
            .title { font-size: 1.8em; letter-spacing: 4px; }
            .star-name { font-size: 2em; }
            .star-icon { font-size: 3em; }
            .star-list { grid-template-columns: repeat(4, 1fr); }
            .lunar-row { grid-template-columns: 1fr 1fr; }
            .lunar-row.three-col { grid-template-columns: 1fr 1fr; }
            .leap-month-check { grid-column: span 2; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <header class="header">
            <h1 class="title">äºŒåå…«æ˜Ÿå®¿</h1>
            <p class="subtitle">æ¢ç´¢ä½ çš„å¤©å‘½æ˜Ÿå®¿</p>
        </header>
        
        <section class="input-section" id="inputSection">
            <!-- æ—¥æœŸç±»å‹åˆ‡æ¢ -->
            <div class="date-type-toggle">
                <button class="toggle-btn active" id="solarBtn" onclick="switchDateType('solar')">â˜€ï¸ é˜³å†</button>
                <button class="toggle-btn" id="lunarBtn" onclick="switchDateType('lunar')">ğŸŒ™ å†œå†</button>
            </div>
            
            <!-- é˜³å†é€‰æ‹©å™¨ -->
            <div class="solar-selector active" id="solarSelector">
                <div class="input-group">
                    <label class="input-label">é€‰æ‹©ä½ çš„é˜³å†ç”Ÿæ—¥</label>
                    <input type="date" class="date-input" id="solarDate" max="">
                </div>
            </div>
            
            <!-- å†œå†é€‰æ‹©å™¨ -->
            <div class="lunar-selector" id="lunarSelector">
                <div class="input-group">
                    <label class="input-label">é€‰æ‹©ä½ çš„å†œå†ç”Ÿæ—¥</label>
                    <div class="lunar-row three-col">
                        <select class="lunar-select" id="lunarYear">
                            <option value="">å¹´ä»½</option>
                        </select>
                        <select class="lunar-select" id="lunarMonth">
                            <option value="">æœˆä»½</option>
                        </select>
                        <select class="lunar-select" id="lunarDay">
                            <option value="">æ—¥æœŸ</option>
                        </select>
                    </div>
                    <div class="lunar-row">
                        <div class="leap-month-check" id="leapMonthCheck" onclick="toggleLeapMonth()">
                            <input type="checkbox" id="isLeapMonth">
                            <label for="isLeapMonth">é—°æœˆ</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ—¥æœŸä¿¡æ¯æ˜¾ç¤º -->
            <div class="date-info hidden" id="dateInfo"></div>
            
            <button class="calc-btn" onclick="calculateStar()">ğŸ”® æµ‹ç®—æ˜Ÿå®¿</button>
            
            <!-- äºŒåå…«å®¿åˆ—è¡¨ -->
            <div class="star-list" id="starList">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>
        
        <section class="loading" id="loading">
            <div class="spinner"></div>
            <p>æ­£åœ¨æ¨ç®—æ˜Ÿå®¿...</p>
        </section>
        
        <section class="result-section" id="resultSection">
            <div class="star-card">
                <div class="star-icon" id="starIcon">â­</div>
                <div class="star-name" id="starName">--</div>
                <div class="star-pinyin" id="starPinyin">--</div>
                <div class="star-animal" id="starAnimal">--</div>
                
                <div class="star-meaning">
                    <div class="meaning-title">æ˜Ÿå®¿å¯“æ„</div>
                    <div class="meaning-text" id="starMeaning">--</div>
                </div>
                
                <div class="star-meaning">
                    <div class="meaning-title">æ€§æ ¼ç‰¹å¾</div>
                    <div class="meaning-text" id="starPersonality">--</div>
                </div>
                
                <div class="star-fortune">
                    <div class="fortune-item">
                        <div class="fortune-label">äº‹ä¸š</div>
                        <div class="fortune-value" id="fortuneCareer">â­â­â­â­</div>
                    </div>
                    <div class="fortune-item">
                        <div class="fortune-label">è´¢è¿</div>
                        <div class="fortune-value" id="fortuneWealth">â­â­â­</div>
                    </div>
                    <div class="fortune-item">
                        <div class="fortune-label">å§»ç¼˜</div>
                        <div class="fortune-value" id="fortuneLove">â­â­â­â­â­</div>
                    </div>
                </div>
            </div>
            
            <button class="share-btn" onclick="shareResult()">ğŸ“¤ åˆ†äº«ç»“æœ</button>
            <button class="reset-btn" onclick="resetCalc()">ğŸ”„ é‡æ–°æµ‹ç®—</button>
        </section>
        
        <footer class="footer">
            <p>äºŒåå…«æ˜Ÿå®¿ Â· ä¸­å›½å¤ä»£å¤©æ–‡å­¦æ™ºæ…§</p>
            <p style="margin-top: 10px; opacity: 0.6;">åŸºäºå†œå†çš„ä¼ ç»Ÿç®—æ³• Â· ä»…ä¾›å¨±ä¹å‚è€ƒ</p>
        </footer>
    </div>

    <script>
        // ============ äºŒåå…«æ˜Ÿå®¿æ•°æ® ============
        const starData = [
            {
                name: 'è§’æœ¨è›Ÿ',
                pinyin: 'JiÇo MÃ¹ JiÄo',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸€å®¿',
                icon: 'ğŸ‰',
                meaning: 'è§’å®¿ä¸ºä¸œæ–¹è‹é¾™ä¹‹é¦–ï¼Œè±¡å¾æ–°çš„å¼€å§‹å’Œè¿›å–ç²¾ç¥ã€‚è§’å®¿ä¸»æ˜¥ç”Ÿä¹‹æ°”ï¼Œä»£è¡¨ä¸‡ç‰©å¤è‹ã€ç”Ÿæœºå‹ƒå‹ƒã€‚',
                personality: 'ä½ å…·æœ‰å¼€æ‹“ç²¾ç¥ï¼Œå‹‡äºåˆ›æ–°ï¼Œå–œæ¬¢æŒ‘æˆ˜æ–°äº‹ç‰©ã€‚æ€§æ ¼ç›´ç‡ï¼Œæœ‰é¢†å¯¼æ‰èƒ½ï¼Œå–„äºå¼€åˆ›å±€é¢ã€‚ä¸ºäººæ­£ç›´ï¼Œæœ‰æ­£ä¹‰æ„Ÿã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'äº¢é‡‘é¾™',
                pinyin: 'KÃ ng JÄ«n LÃ³ng',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬äºŒå®¿',
                icon: 'ğŸ²',
                meaning: 'äº¢å®¿è±¡å¾é¾™çš„å’½å–‰ï¼Œä¸»å¨ä¸¥å’ŒæƒåŠ¿ã€‚ä»£è¡¨åˆšå¼ºã€åšæ¯…çš„å“è´¨ï¼Œæœ‰æŠ¤ä½‘ä¹‹åŠ›ã€‚',
                personality: 'ä½ æ€§æ ¼åˆšå¼ºï¼Œæ„å¿—åšå®šï¼Œä¸è½»æ˜“æ”¾å¼ƒã€‚æœ‰è´£ä»»æ„Ÿï¼Œé‡æƒ…ä¹‰ï¼Œå¯¹æœ‹å‹å¿ è¯šã€‚åšäº‹æœ‰é­„åŠ›ï¼Œä½†æœ‰æ—¶ä¼šè¿‡äºå›ºæ‰§ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'æ°åœŸè²‰',
                pinyin: 'DÄ« TÇ” HÃ©',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦¡',
                meaning: 'æ°å®¿ä¸ºé¾™èƒ¸ï¼Œè±¡å¾æ ¹åŸºå’Œç¨³é‡ã€‚ä¸»å®‰å®šã€è¸å®ï¼Œæœ‰å®ˆæˆä¹‹èƒ½ã€‚',
                personality: 'ä½ æ€§æ ¼ç¨³é‡è¸å®ï¼Œåšäº‹æœ‰æ¡ç†ã€‚é‡è§†å®¶åº­ï¼Œæœ‰ç†è´¢å¤´è„‘ã€‚ä¸ºäººè¯šå®å¯é ï¼Œæ˜¯å€¼å¾—ä¿¡èµ–çš„æœ‹å‹ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'æˆ¿æ—¥å…”',
                pinyin: 'FÃ¡ng RÃ¬ TÃ¹',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬å››å®¿',
                icon: 'ğŸ°',
                meaning: 'æˆ¿å®¿ä¸ºé¾™è…¹ï¼Œè±¡å¾ä¸°é¥¶å’Œç¾å¥½ã€‚ä¸»å‰ç¥¥ã€å¹¸ç¦ï¼Œä»£è¡¨æ¸©æŸ”å’Œå–„è‰¯ã€‚',
                personality: 'ä½ æ€§æ ¼æ¸©å’Œï¼Œå¿ƒåœ°å–„è‰¯ï¼Œæœ‰åŒæƒ…å¿ƒã€‚å–„äºä¸äººç›¸å¤„ï¼Œäººç¼˜å¥½ã€‚è¿½æ±‚ç¾å¥½äº‹ç‰©ï¼Œæœ‰è‰ºæœ¯å¤©èµ‹ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å¿ƒæœˆç‹',
                pinyin: 'XÄ«n YuÃ¨ HÃº',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬äº”å®¿',
                icon: 'ğŸ¦Š',
                meaning: 'å¿ƒå®¿ä¸ºé¾™å¿ƒï¼Œè±¡å¾æ™ºæ…§å’Œçµæ€§ã€‚ä¸»èªæ…§ã€æœºæ•ï¼Œæœ‰æ´å¯Ÿäººå¿ƒä¹‹èƒ½ã€‚',
                personality: 'ä½ èªæ˜æœºæ™ºï¼Œååº”æ•æ·ï¼Œå–„äºå¯Ÿè¨€è§‚è‰²ã€‚æœ‰é­…åŠ›ï¼Œå¼‚æ€§ç¼˜å¥½ã€‚ä½†æœ‰æ—¶ä¼šæƒ…ç»ªåŒ–ï¼Œéœ€è¦å­¦ä¼šæ§åˆ¶æƒ…æ„Ÿã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å°¾ç«è™',
                pinyin: 'WÄ›i HuÇ’ HÇ”',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬å…­å®¿',
                icon: 'ğŸ…',
                meaning: 'å°¾å®¿ä¸ºé¾™å°¾ï¼Œè±¡å¾åŠ›é‡å’Œå¨ä¸¥ã€‚ä¸»å‹‡çŒ›ã€æœæ–­ï¼Œæœ‰å†²é”‹é™·é˜µä¹‹å‹‡ã€‚',
                personality: 'ä½ æ€§æ ¼è±ªçˆ½ï¼Œæœ‰å†’é™©ç²¾ç¥ï¼Œæ•¢äºæ‹¼æã€‚ä¸ºäººä»—ä¹‰ï¼Œè·¯è§ä¸å¹³ä¼šæ‹”åˆ€ç›¸åŠ©ã€‚è„¾æ°”ç›´ç‡ï¼Œè¯´è¯ç›´æ¥ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'ç®•æ°´è±¹',
                pinyin: 'JÄ« ShuÇ BÃ o',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸ƒå®¿',
                icon: 'ğŸ†',
                meaning: 'ç®•å®¿ä¸ºé¾™å°¾æ‰€åŒ–ä¹‹é£ï¼Œè±¡å¾çµåŠ¨å’Œå˜åŒ–ã€‚ä¸»æ™ºæ…§ã€å˜é€šï¼Œæœ‰åŒ–é™©ä¸ºå¤·ä¹‹èƒ½ã€‚',
                personality: 'ä½ æœºæ™ºçµæ´»ï¼Œå–„äºéšæœºåº”å˜ã€‚é€‚åº”èƒ½åŠ›å¼ºï¼Œèƒ½åœ¨å›°å¢ƒä¸­æ‰¾åˆ°å‡ºè·¯ã€‚å¤šæ‰å¤šè‰ºï¼Œå…´è¶£å¹¿æ³›ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'æ–—æœ¨ç¬',
                pinyin: 'DÇ’u MÃ¹ XiÃ¨',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸€å®¿',
                icon: 'ğŸ¦Œ',
                meaning: 'æ–—å®¿ä¸ºåŒ—æ–—ä¹‹å½¢ï¼Œè±¡å¾æƒå¨å’ŒæŒ‡å¼•ã€‚ä¸»æ™ºæ…§ã€é¢†å¯¼åŠ›ï¼Œæœ‰æ˜è¾¨æ˜¯éä¹‹èƒ½ã€‚',
                personality: 'ä½ æœ‰é¢†å¯¼æ‰èƒ½ï¼Œå–„äºç»„ç»‡åè°ƒã€‚ä¸ºäººæ­£ç›´ï¼Œæœ‰åŸåˆ™æ€§ã€‚è¿½æ±‚å…¬å¹³æ­£ä¹‰ï¼Œé€‚åˆåšç®¡ç†è€…ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'ç‰›é‡‘ç‰›',
                pinyin: 'NiÃº JÄ«n NiÃº',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬äºŒå®¿',
                icon: 'ğŸ‚',
                meaning: 'ç‰›å®¿è±¡å¾å‹¤åŠ³å’Œè¸å®ã€‚ä¸»å‹¤å¥‹ã€åšéŸ§ï¼Œæœ‰åƒè‹¦è€åŠ³ä¹‹å¾·ã€‚',
                personality: 'ä½ å‹¤åŠ³è¸å®ï¼Œåšäº‹è®¤çœŸè´Ÿè´£ã€‚æœ‰è€å¿ƒå’Œæ¯…åŠ›ï¼Œèƒ½åšæŒç›®æ ‡ã€‚ä¸ºäººè¯šæ³ï¼Œé‡ä¿¡å®ˆè¯ºã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'å¥³åœŸè ',
                pinyin: 'NÇš TÇ” FÃº',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦‡',
                meaning: 'å¥³å®¿è±¡å¾æ™ºæ…§å’Œçµå·§ã€‚ä¸»æœºæ•ã€èªæ…§ï¼Œæœ‰å·§æ€å¦™æƒ³ä¹‹èƒ½ã€‚',
                personality: 'ä½ å¿ƒæ€ç»†è…»ï¼Œè§‚å¯ŸåŠ›æ•é”ã€‚æ“…é•¿ç»†èŠ‚å·¥ä½œï¼Œæœ‰æ‰‹å·¥è‰ºå¤©èµ‹ã€‚ä¸ºäººæ¸©æŸ”ï¼Œå–„è§£äººæ„ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'è™šæ—¥é¼ ',
                pinyin: 'XÅ« RÃ¬ ShÇ”',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬å››å®¿',
                icon: 'ğŸ­',
                meaning: 'è™šå®¿è±¡å¾è™šç©ºå’Œå˜åŒ–ã€‚ä¸»æœºå˜ã€çµæ´»ï¼Œæœ‰è¶‹å‰é¿å‡¶ä¹‹æ™ºã€‚',
                personality: 'ä½ èªæ˜çµæ´»ï¼Œå–„äºæŠŠæ¡æœºä¼šã€‚é€‚åº”åŠ›å¼ºï¼Œèƒ½åœ¨å˜åŒ–ä¸­æ±‚ç”Ÿå­˜ã€‚ä¸ºäººè°¨æ…ï¼Œåšäº‹æœ‰æ¡ç†ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'å±æœˆç‡•',
                pinyin: 'WÄ“i YuÃ¨ YÃ n',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬äº”å®¿',
                icon: 'ğŸ¦',
                meaning: 'å±å®¿è±¡å¾å±æœºå’Œè½¬æœºã€‚ä¸»åŒ–é™©ä¸ºå¤·ï¼Œæœ‰é€¢å‡¶åŒ–å‰ä¹‹èƒ½ã€‚',
                personality: 'ä½ æ€§æ ¼ç‹¬ç«‹ï¼Œæœ‰å†’é™©ç²¾ç¥ã€‚èƒ½åœ¨å±æœºä¸­ä¿æŒå†·é™ï¼Œæ‰¾åˆ°å‡ºè·¯ã€‚ä¸ºäººæœºè­¦ï¼Œå–„äºè‡ªæˆ‘ä¿æŠ¤ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'å®¤ç«çŒª',
                pinyin: 'ShÃ¬ HuÇ’ ZhÅ«',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬å…­å®¿',
                icon: 'ğŸ·',
                meaning: 'å®¤å®¿è±¡å¾æˆ¿å±‹å’Œå®‰å®šã€‚ä¸»å®‰å®šã€å®ˆæŠ¤ï¼Œæœ‰å®¶å®…å¹³å®‰ä¹‹ç¦ã€‚',
                personality: 'ä½ é‡è§†å®¶åº­ï¼Œæœ‰å®ˆæŠ¤å®¶äººçš„è´£ä»»æ„Ÿã€‚åšäº‹ç¨³é‡ï¼Œè¿½æ±‚å®‰å®šã€‚ä¸ºäººå®½åšï¼Œæœ‰åŒ…å®¹å¿ƒã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å£æ°´è²',
                pinyin: 'BÃ¬ ShuÇ YÇ”',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸ƒå®¿',
                icon: 'ğŸº',
                meaning: 'å£å®¿è±¡å¾å±éšœå’Œä¿æŠ¤ã€‚ä¸»é˜²å¾¡ã€å®ˆæŠ¤ï¼Œæœ‰é¿é‚ªæŠ¤èº«ä¹‹èƒ½ã€‚',
                personality: 'ä½ æ€§æ ¼è°¨æ…ï¼Œå–„äºé˜²èŒƒé£é™©ã€‚æœ‰ä¿æŠ¤æ¬²ï¼Œä¼šç…§é¡¾èº«è¾¹äººã€‚åšäº‹ç»†è‡´ï¼Œè¿½æ±‚å®Œç¾ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'å¥æœ¨ç‹¼',
                pinyin: 'KuÃ­ MÃ¹ LÃ¡ng',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸€å®¿',
                icon: 'ğŸº',
                meaning: 'å¥å®¿è±¡å¾æ–‡é‡‡å’Œæ™ºæ…§ã€‚ä¸»æ–‡è¿ã€æ‰åï¼Œæœ‰æ–‡ç« ç›–ä¸–ä¹‹æ‰ã€‚',
                personality: 'ä½ æœ‰æ–‡è‰ºå¤©èµ‹ï¼Œå–„äºè¡¨è¾¾ã€‚å–œæ¬¢å­¦ä¹ ï¼ŒçŸ¥è¯†é¢å¹¿ã€‚ä¸ºäººæ¸©å’Œï¼Œæœ‰ä¹¦å·æ°”ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'å¨„é‡‘ç‹—',
                pinyin: 'LÃ³u JÄ«n GÇ’u',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬äºŒå®¿',
                icon: 'ğŸ•',
                meaning: 'å¨„å®¿è±¡å¾å¿ è¯šå’Œå®ˆä¿¡ã€‚ä¸»è¯šä¿¡ã€å¿ å®ï¼Œæœ‰å®ˆæŠ¤ä¹‹å¾·ã€‚',
                personality: 'ä½ å¿ è¯šå¯é ï¼Œé‡æƒ…ä¹‰ã€‚å¯¹æœ‹å‹çœŸè¯šï¼Œä¼šä¼¸å‡ºæ´æ‰‹ã€‚åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œå€¼å¾—ä¿¡èµ–ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'èƒƒåœŸé›‰',
                pinyin: 'WÃ¨i TÇ” ZhÃ¬',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦š',
                meaning: 'èƒƒå®¿è±¡å¾å¯Œè¶³å’Œæ”¶è—ã€‚ä¸»è´¢è¿ã€ç§¯è“„ï¼Œæœ‰è¡£é£Ÿæ— å¿§ä¹‹ç¦ã€‚',
                personality: 'ä½ æœ‰ç†è´¢å¤´è„‘ï¼Œå–„äºç§¯ç´¯è´¢å¯Œã€‚åšäº‹åŠ¡å®ï¼Œä¸æµ®å¤¸ã€‚ä¸ºäººå¤§æ–¹ï¼Œä¹äºåŠ©äººã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'æ˜´æ—¥é¸¡',
                pinyin: 'MÇo RÃ¬ JÄ«',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬å››å®¿',
                icon: 'ğŸ“',
                meaning: 'æ˜´å®¿è±¡å¾å…‰æ˜å’Œå¸Œæœ›ã€‚ä¸»å…‰æ˜ç£Šè½ï¼Œæœ‰å‰ç¨‹ä¼¼é”¦ä¹‹è±¡ã€‚',
                personality: 'ä½ æ€§æ ¼å…‰æ˜æ­£å¤§ï¼Œä¸æ‹˜å°èŠ‚ã€‚æœ‰è¿›å–å¿ƒï¼Œè¿½æ±‚å“è¶Šã€‚ä¸ºäººçƒ­å¿ƒï¼Œå–œæ¬¢å¸®åŠ©ä»–äººã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'æ¯•æœˆä¹Œ',
                pinyin: 'BÃ¬ YuÃ¨ WÅ«',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬äº”å®¿',
                icon: 'ğŸ¦â€â¬›',
                meaning: 'æ¯•å®¿è±¡å¾å®Œæˆå’Œåœ†æ»¡ã€‚ä¸»åœ†æ»¡ã€æˆå°±ï¼Œæœ‰æˆåŠŸä¹‹è±¡ã€‚',
                personality: 'ä½ åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œè¿½æ±‚å®Œç¾ã€‚æœ‰æ¯…åŠ›èƒ½åšæŒï¼Œä¸è¾¾ç›®çš„ä¸ç½¢ä¼‘ã€‚ä¸ºäººè®¤çœŸï¼Œä¸€ä¸ä¸è‹Ÿã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'è§œç«çŒ´',
                pinyin: 'ZÄ« HuÇ’ HÃ³u',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬å…­å®¿',
                icon: 'ğŸ’',
                meaning: 'è§œå®¿è±¡å¾æœºæ•å’Œçµå·§ã€‚ä¸»æœºæ™ºã€çµæ´»ï¼Œæœ‰éšæœºåº”å˜ä¹‹èƒ½ã€‚',
                personality: 'ä½ èªæ˜æœºçµï¼Œååº”å¿«ã€‚å–„äºäº¤é™…ï¼Œäººç¼˜å¥½ã€‚å¤šæ‰å¤šè‰ºï¼Œå…´è¶£å¹¿æ³›ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å‚æ°´çŒ¿',
                pinyin: 'ShÄ“n ShuÇ YuÃ¡n',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸ƒå®¿',
                icon: 'ğŸ¦§',
                meaning: 'å‚å®¿è±¡å¾æˆç†Ÿå’Œä¸°æ”¶ã€‚ä¸»æˆå°±ã€æ”¶è·ï¼Œæœ‰å¤§å™¨æ™šæˆä¹‹è±¡ã€‚',
                personality: 'ä½ æˆç†Ÿç¨³é‡ï¼Œæœ‰è¿œè§ã€‚åšäº‹æœ‰è®¡åˆ’ï¼Œæ­¥æ­¥ä¸ºè¥ã€‚ä¸ºäººè°¦è™šï¼Œä¸å¼ æ‰¬ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'äº•æœ¨çŠ´',
                pinyin: 'JÇng MÃ¹ Ã€n',
                animal: 'å—æ–¹æœ±é›€ç¬¬ä¸€å®¿',
                icon: 'ğŸ¦',
                meaning: 'äº•å®¿è±¡å¾æ°´æºå’Œæ»‹å…»ã€‚ä¸»æ¶¦æ³½ã€å…»è‚²ï¼Œæœ‰æºæºä¸æ–­ä¹‹ç¦ã€‚',
                personality: 'ä½ æœ‰åŒ…å®¹å¿ƒï¼Œå–„äºç…§é¡¾ä»–äººã€‚æœ‰åˆ›é€ åŠ›ï¼Œæ€ç»´æ´»è·ƒã€‚ä¸ºäººæ…·æ…¨ï¼Œä¹äºåˆ†äº«ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'é¬¼é‡‘ç¾Š',
                pinyin: 'GuÇ JÄ«n YÃ¡ng',
                animal: 'å—æ–¹æœ±é›€ç¬¬äºŒå®¿',
                icon: 'ğŸ‘',
                meaning: 'é¬¼å®¿è±¡å¾ç¥ç§˜å’Œç›´è§‰ã€‚ä¸»çµæ€§ã€ç›´è§‰ï¼Œæœ‰è¶…å‡¡æ„ŸçŸ¥ä¹‹èƒ½ã€‚',
                personality: 'ä½ ç›´è§‰æ•é”ï¼Œæœ‰ç¬¬å…­æ„Ÿã€‚å–„äºè§‚å¯Ÿï¼Œèƒ½çœ‹é€äººå¿ƒã€‚ä¸ºäººç¥ç§˜ï¼Œæœ‰ç‹¬ç‰¹é­…åŠ›ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'æŸ³åœŸç',
                pinyin: 'LiÇ” TÇ” ZhÄng',
                animal: 'å—æ–¹æœ±é›€ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦Œ',
                meaning: 'æŸ³å®¿è±¡å¾æŸ”éŸ§å’Œé€‚åº”ã€‚ä¸»é€‚åº”ã€å˜é€šï¼Œæœ‰ç™¾æŠ˜ä¸æŒ ä¹‹å¾·ã€‚',
                personality: 'ä½ æ€§æ ¼æ¸©å’Œï¼Œå–„äºé€‚åº”ç¯å¢ƒã€‚æœ‰éŸ§æ€§ï¼Œé‡åˆ°å›°éš¾ä¸é€€ç¼©ã€‚ä¸ºäººéšå’Œï¼Œå®¹æ˜“ç›¸å¤„ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'æ˜Ÿæ—¥é©¬',
                pinyin: 'XÄ«ng RÃ¬ MÇ',
                animal: 'å—æ–¹æœ±é›€ç¬¬å››å®¿',
                icon: 'ğŸ´',
                meaning: 'æ˜Ÿå®¿è±¡å¾å…‰æ˜å’Œå¸Œæœ›ã€‚ä¸»å‰ç¨‹ã€å‘å±•ï¼Œæœ‰å‰é€”æ— é‡ä¹‹è±¡ã€‚',
                personality: 'ä½ å……æ»¡æ´»åŠ›ï¼Œæœ‰è¿›å–å¿ƒã€‚å–œæ¬¢è‡ªç”±ï¼Œä¸å–œæ¬¢æŸç¼šã€‚ä¸ºäººä¹è§‚ï¼Œå……æ»¡æ­£èƒ½é‡ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'å¼ æœˆé¹¿',
                pinyin: 'ZhÄng YuÃ¨ LÃ¹',
                animal: 'å—æ–¹æœ±é›€ç¬¬äº”å®¿',
                icon: 'ğŸ¦Œ',
                meaning: 'å¼ å®¿è±¡å¾å±•å¼€å’Œå‘å±•ã€‚ä¸»æ‰©å¼ ã€å‘å±•ï¼Œæœ‰è’¸è’¸æ—¥ä¸Šä¹‹åŠ¿ã€‚',
                personality: 'ä½ æœ‰å¼€æ‹“ç²¾ç¥ï¼Œå–„äºæ‰©å±•äº‹ä¸šã€‚æœ‰é¢†å¯¼æ‰èƒ½ï¼Œèƒ½å¸¦é¢†å›¢é˜Ÿã€‚ä¸ºäººå¤§æ°”ï¼Œæœ‰æ ¼å±€ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'ç¿¼ç«è›‡',
                pinyin: 'YÃ¬ HuÇ’ ShÃ©',
                animal: 'å—æ–¹æœ±é›€ç¬¬å…­å®¿',
                icon: 'ğŸ',
                meaning: 'ç¿¼å®¿è±¡å¾é£ç¿”å’Œè‡ªç”±ã€‚ä¸»è‡ªç”±ã€å˜åŒ–ï¼Œæœ‰æ— æ‹˜æ— æŸä¹‹æ€ã€‚',
                personality: 'ä½ çƒ­çˆ±è‡ªç”±ï¼Œä¸å–œæ¬¢è¢«æŸç¼šã€‚æ€ç»´æ´»è·ƒï¼Œåˆ›æ„å¤šã€‚ä¸ºäººç‹¬ç«‹ï¼Œæœ‰è‡ªå·±çš„æƒ³æ³•ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'è½¸æ°´èš“',
                pinyin: 'ZhÄ›n ShuÇ YÇn',
                animal: 'å—æ–¹æœ±é›€ç¬¬ä¸ƒå®¿',
                icon: 'ğŸ›',
                meaning: 'è½¸å®¿è±¡å¾å½’å®¿å’Œåœ†æ»¡ã€‚ä¸»åœ†æ»¡ã€æˆå°±ï¼Œæœ‰å–„å§‹å–„ç»ˆä¹‹å¾·ã€‚',
                personality: 'ä½ åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œè¿½æ±‚å®Œç¾ç»“å±€ã€‚æœ‰è´£ä»»æ„Ÿï¼Œä¼šåšæŒåˆ°åº•ã€‚ä¸ºäººè¸å®ï¼Œå€¼å¾—ä¿¡èµ–ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            }
        ];

        // ============ å†œå†æ•°æ®è¡¨ (1900-2030) ============
        // æ•°æ®æ ¼å¼ï¼šé«˜16ä½ä¸ºé—°æœˆæœˆä»½(0è¡¨ç¤ºæ— é—°æœˆ)ï¼Œä½16ä½ä¸ºæ¯æœˆå¤©æ•°(13ä¸ªæœˆ)
        // ä½¿ç”¨å‹ç¼©æ ¼å¼å­˜å‚¨å†œå†æ•°æ®
        const lunarData = {
            // 1900-1909
            1900: [0, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30],
            1901: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29],
            1902: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1903: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1904: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1905: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1906: [0, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29],
            1907: [0, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30],
            1908: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29],
            1909: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            // 1910-1919
            1910: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1911: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1912: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1913: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1914: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1915: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1916: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1917: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1918: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1919: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            // 1920-1929
            1920: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1921: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1922: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1923: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1924: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1925: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1926: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1927: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1928: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1929: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            // 1930-1939
            1930: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1931: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1932: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1933: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1934: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1935: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1936: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1937: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1938: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1939: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            // 1940-1949
            1940: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1941: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1942: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1943: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1944: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1945: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1946: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1947: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1948: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1949: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            // 1950-1959
            1950: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1951: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1952: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1953: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1954: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1955: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1956: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1957: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1958: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1959: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            // 1960-1969
            1960: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1961: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1962: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1963: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1964: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1965: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1966: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1967: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1968: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1969: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            // 1970-1979
            1970: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1971: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1972: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1973: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1974: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1975: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1976: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1977: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1978: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1979: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            // 1980-1989
            1980: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1981: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1982: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1983: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1984: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1985: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1986: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1987: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1988: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1989: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            // 1990-1999
            1990: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1991: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1992: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1993: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            1994: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1995: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            1996: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            1997: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            1998: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            1999: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            // 2000-2009
            2000: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2001: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2002: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            2003: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            2004: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            2005: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            2006: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2007: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2008: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            2009: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            // 2010-2019
            2010: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            2011: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            2012: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2013: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2014: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            2015: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            2016: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            2017: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            2018: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2019: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            // 2020-2030
            2020: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            2021: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            2022: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            2023: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            2024: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2025: [0, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30],
            2026: [0, 29, 30, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29],
            2027: [0, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30, 29, 30],
            2028: [0, 29, 30, 29, 30, 29, 30, 29, 30, 30, 29, 30, 29],
            2029: [0, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 30],
            2030: [0, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30]
        };

        // ç²¾ç¡®çš„é—°æœˆæ•°æ® (å¹´ä»½ -> é—°æœˆæœˆä»½ï¼Œ0è¡¨ç¤ºæ— é—°æœˆ)
        const leapMonthData = {
            1900: 8, 1901: 0, 1902: 0, 1903: 0, 1904: 0, 1905: 0, 1906: 4, 1907: 0, 1908: 0, 1909: 0,
            1910: 0, 1911: 0, 1912: 5, 1913: 0, 1914: 0, 1915: 0, 1916: 0, 1917: 0, 1918: 6, 1919: 0,
            1920: 0, 1921: 0, 1922: 0, 1923: 0, 1924: 7, 1925: 0, 1926: 0, 1927: 0, 1928: 0, 1929: 0,
            1930: 6, 1931: 0, 1932: 0, 1933: 0, 1934: 0, 1935: 0, 1936: 5, 1937: 0, 1938: 0, 1939: 0,
            1940: 0, 1941: 0, 1942: 7, 1943: 0, 1944: 0, 1945: 0, 1946: 0, 1947: 0, 1948: 5, 1949: 0,
            1950: 0, 1951: 0, 1952: 0, 1953: 0, 1954: 4, 1955: 0, 1956: 0, 1957: 0, 1958: 0, 1959: 0,
            1960: 6, 1961: 0, 1962: 0, 1963: 0, 1964: 0, 1965: 0, 1966: 4, 1967: 0, 1968: 0, 1969: 0,
            1970: 0, 1971: 0, 1972: 5, 1973: 0, 1974: 0, 1975: 0, 1976: 0, 1977: 0, 1978: 6, 1979: 0,
            1980: 0, 1981: 0, 1982: 4, 1983: 0, 1984: 10, 1985: 0, 1986: 0, 1987: 6, 1988: 0, 1989: 0,
            1990: 5, 1991: 0, 1992: 0, 1993: 0, 1994: 0, 1995: 8, 1996: 0, 1997: 0, 1998: 5, 1999: 0,
            2000: 0, 2001: 4, 2002: 0, 2003: 0, 2004: 2, 2005: 0, 2006: 7, 2007: 0, 2008: 0, 2009: 0,
            2010: 5, 2011: 0, 2012: 4, 2013: 0, 2014: 9, 2015: 0, 2016: 0, 2017: 6, 2018: 0, 2019: 0,
            2020: 4, 2021: 0, 2022: 0, 2023: 2, 2024: 0, 2025: 6, 2026: 0, 2027: 0, 2028: 5, 2029: 0,
            2030: 0
        };

        // äºŒåå…«æ˜Ÿå®¿å€¼æ—¥åŸºå‡†è¡¨ (æ­£æœˆåˆä¸€å¯¹åº”çš„æ˜Ÿå®¿ç´¢å¼•)
        // åŸºäºä¼ ç»Ÿç®—æ³•ï¼šæ¯å¹´æ­£æœˆåˆä¸€ä»ç‰¹å®šæ˜Ÿå®¿å¼€å§‹å¾ªç¯
        const yearBaseStar = {
            // 1900-1909: ä»è§’å®¿å¼€å§‹ï¼Œæ¯å¹´é¡ºç§»
            1900: 0, 1901: 9, 1902: 18, 1903: 27, 1904: 8, 1905: 17, 1906: 26, 1907: 7, 1908: 16, 1909: 25,
            // 1910-1919
            1910: 6, 1911: 15, 1912: 24, 1913: 5, 1914: 14, 1915: 23, 1916: 4, 1917: 13, 1918: 22, 1919: 3,
            // 1920-1929
            1920: 12, 1921: 21, 1922: 2, 1923: 11, 1924: 20, 1925: 1, 1926: 10, 1927: 19, 1928: 0, 1929: 9,
            // 1930-1939
            1930: 18, 1931: 27, 1932: 8, 1933: 17, 1934: 26, 1935: 7, 1936: 16, 1937: 25, 1938: 6, 1939: 15,
            // 1940-1949
            1940: 24, 1941: 5, 1942: 14, 1943: 23, 1944: 4, 1945: 13, 1946: 22, 1947: 3, 1948: 12, 1949: 21,
            // 1950-1959
            1950: 2, 1951: 11, 1952: 20, 1953: 1, 1954: 10, 1955: 19, 1956: 0, 1957: 9, 1958: 18, 1959: 27,
            // 1960-1969
            1960: 8, 1961: 17, 1962: 26, 1963: 7, 1964: 16, 1965: 25, 1966: 6, 1967: 15, 1968: 24, 1969: 5,
            // 1970-1979
            1970: 14, 1971: 23, 1972: 4, 1973: 13, 1974: 22, 1975: 3, 1976: 12, 1977: 21, 1978: 2, 1979: 11,
            // 1980-1989
            1980: 20, 1981: 1, 1982: 10, 1983: 19, 1984: 0, 1985: 9, 1986: 18, 1987: 27, 1988: 8, 1989: 17,
            // 1990-1999
            1990: 26, 1991: 7, 1992: 16, 1993: 25, 1994: 6, 1995: 15, 1996: 24, 1997: 5, 1998: 14, 1999: 23,
            // 2000-2009
            2000: 4, 2001: 13, 2002: 22, 2003: 3, 2004: 12, 2005: 21, 2006: 2, 2007: 11, 2008: 20, 2009: 1,
            // 2010-2019
            2010: 10, 2011: 19, 2012: 0, 2013: 9, 2014: 18, 2015: 27, 2016: 8, 2017: 17, 2018: 26, 2019: 7,
            // 2020-2030
            2020: 16, 2021: 25, 2022: 6, 2023: 15, 2024: 24, 2025: 5, 2026: 14, 2027: 23, 2028: 4, 2029: 13, 2030: 22
        };

        // å¤©å¹²åœ°æ”¯
        const heavenlyStems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
        const earthlyBranches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
        const zodiacAnimals = ['é¼ ', 'ç‰›', 'è™', 'å…”', 'é¾™', 'è›‡', 'é©¬', 'ç¾Š', 'çŒ´', 'é¸¡', 'ç‹—', 'çŒª'];

        // å½“å‰æ—¥æœŸç±»å‹
        let currentDateType = 'solar';

        // ============ åˆå§‹åŒ– ============
        function init() {
            createStars();
            createStarList();
            initLunarSelectors();
            
            // è®¾ç½®æ—¥æœŸè¾“å…¥æœ€å¤§å€¼ä¸ºä»Šå¤©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('solarDate').max = today;
        }

        // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            
            // æ™®é€šæ˜Ÿæ˜Ÿ
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.opacity = Math.random() * 0.8 + 0.2;
                starsContainer.appendChild(star);
            }
            
            // æµæ˜Ÿ
            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.top = Math.random() * 50 + '%';
                shootingStar.style.animationDelay = i * 5 + 's';
                starsContainer.appendChild(shootingStar);
            }
        }

        // åˆ›å»ºæ˜Ÿå®¿åˆ—è¡¨
        function createStarList() {
            const list = document.getElementById('starList');
            starData.forEach((star, index) => {
                const item = document.createElement('div');
                item.className = 'star-item';
                item.textContent = star.name.substring(0, 2);
                item.id = 'star-' + index;
                list.appendChild(item);
            });
        }

        // åˆå§‹åŒ–å†œå†é€‰æ‹©å™¨
        function initLunarSelectors() {
            const yearSelect = document.getElementById('lunarYear');
            const monthSelect = document.getElementById('lunarMonth');
            const daySelect = document.getElementById('lunarDay');

            // å¡«å……å¹´ä»½ (1900-2030)
            for (let year = 1900; year <= 2030; year++) {
                const option = document.createElement('option');
                option.value = year;
                const stem = heavenlyStems[(year - 4) % 10];
                const branch = earthlyBranches[(year - 4) % 12];
                const zodiac = zodiacAnimals[(year - 4) % 12];
                option.textContent = `${year}å¹´ (${stem}${branch} ${zodiac}å¹´)`;
                yearSelect.appendChild(option);
            }

            // å¡«å……æœˆä»½
            for (let month = 1; month <= 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = `${month}æœˆ`;
                monthSelect.appendChild(option);
            }

            // å¡«å……æ—¥æœŸ
            updateLunarDays();

            // ç›‘å¬å¹´ä»½å˜åŒ–ï¼Œæ›´æ–°é—°æœˆæ˜¾ç¤º
            yearSelect.addEventListener('change', function() {
                updateLeapMonthVisibility();
                updateDateInfo();
            });

            monthSelect.addEventListener('change', function() {
                updateLunarDays();
                updateDateInfo();
            });

            daySelect.addEventListener('change', updateDateInfo);

            // è®¾ç½®é»˜è®¤å€¼ä¸ºä»Šå¹´
            const currentYear = new Date().getFullYear();
            if (currentYear <= 2030) {
                yearSelect.value = currentYear;
                updateLeapMonthVisibility();
            }
        }

        // æ›´æ–°å†œå†æ—¥æœŸé€‰é¡¹
        function updateLunarDays() {
            const year = parseInt(document.getElementById('lunarYear').value) || 1900;
            const month = parseInt(document.getElementById('lunarMonth').value) || 1;
            const isLeap = document.getElementById('isLeapMonth').checked;
            const daySelect = document.getElementById('lunarDay');

            // è·å–è¯¥æœˆçš„å¤©æ•°
            let daysInMonth = 30;
            if (year >= 1900 && year <= 2030) {
                const yearData = lunarData[year];
                if (yearData) {
                    const leapMonth = leapMonthData[year];
                    if (isLeap && month === leapMonth && leapMonth > 0) {
                        // é—°æœˆå¤©æ•°
                        daysInMonth = yearData[leapMonth + 1] || 29;
                    } else {
                        daysInMonth = yearData[month] || 30;
                    }
                }
            }

            // ä¿å­˜å½“å‰é€‰æ‹©
            const currentDay = daySelect.value;

            // æ¸…ç©ºå¹¶é‡æ–°å¡«å……
            daySelect.innerHTML = '<option value="">æ—¥æœŸ</option>';
            for (let day = 1; day <= daysInMonth; day++) {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = `${day}æ—¥`;
                daySelect.appendChild(option);
            }

            // æ¢å¤é€‰æ‹©
            if (currentDay && currentDay <= daysInMonth) {
                daySelect.value = currentDay;
            }
        }

        // æ›´æ–°é—°æœˆæ˜¾ç¤º
        function updateLeapMonthVisibility() {
            const year = parseInt(document.getElementById('lunarYear').value) || 0;
            const leapMonthCheck = document.getElementById('leapMonthCheck');
            const monthSelect = document.getElementById('lunarMonth');

            if (year > 0 && leapMonthData[year] > 0) {
                leapMonthCheck.style.display = 'flex';
                // å¦‚æœå½“å‰é€‰ä¸­çš„æœˆä»½ä¸æ˜¯é—°æœˆï¼Œå–æ¶ˆå‹¾é€‰
                const currentMonth = parseInt(monthSelect.value) || 0;
                const leapMonth = leapMonthData[year];
                if (currentMonth !== leapMonth) {
                    document.getElementById('isLeapMonth').checked = false;
                    leapMonthCheck.classList.remove('checked');
                }
            } else {
                leapMonthCheck.style.display = 'none';
                document.getElementById('isLeapMonth').checked = false;
                leapMonthCheck.classList.remove('checked');
            }
            updateLunarDays();
        }

        // åˆ‡æ¢é—°æœˆ
        function toggleLeapMonth() {
            const checkbox = document.getElementById('isLeapMonth');
            const checkDiv = document.getElementById('leapMonthCheck');
            checkbox.checked = !checkbox.checked;
            checkDiv.classList.toggle('checked', checkbox.checked);
            updateLunarDays();
            updateDateInfo();
        }

        // åˆ‡æ¢æ—¥æœŸç±»å‹
        function switchDateType(type) {
            currentDateType = type;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('solarBtn').classList.toggle('active', type === 'solar');
            document.getElementById('lunarBtn').classList.toggle('active', type === 'lunar');
            
            // æ˜¾ç¤º/éšè—é€‰æ‹©å™¨
            document.getElementById('solarSelector').classList.toggle('active', type === 'solar');
            document.getElementById('lunarSelector').classList.toggle('active', type === 'lunar');
            
            // éšè—æ—¥æœŸä¿¡æ¯
            document.getElementById('dateInfo').classList.add('hidden');
        }

        // æ›´æ–°æ—¥æœŸä¿¡æ¯æ˜¾ç¤º
        function updateDateInfo() {
            const year = document.getElementById('lunarYear').value;
            const month = document.getElementById('lunarMonth').value;
            const day = document.getElementById('lunarDay').value;
            const isLeap = document.getElementById('isLeapMonth').checked;
            
            const dateInfo = document.getElementById('dateInfo');
            
            if (year && month && day) {
                const leapText = isLeap ? 'é—°' : '';
                dateInfo.textContent = `å†œå†ï¼š${year}å¹´ ${leapText}${month}æœˆ${day}æ—¥`;
                dateInfo.classList.remove('hidden');
            } else {
                dateInfo.classList.add('hidden');
            }
        }

        // ============ å†œå†è½¬é˜³å† ============
        function lunarToSolar(year, month, day, isLeap) {
            // åŸºå‡†æ—¥æœŸï¼š1900å¹´1æœˆ31æ—¥æ˜¯å†œå†1900å¹´æ­£æœˆåˆä¸€
            const baseDate = new Date(1900, 0, 31);
            let totalDays = 0;

            // ç´¯åŠ ä¹‹å‰å¹´ä»½çš„å¤©æ•°
            for (let y = 1900; y < year; y++) {
                if (y >= 1900 && y <= 2030) {
                    const yearData = lunarData[y];
                    const leapMonth = leapMonthData[y];
                    for (let m = 1; m <= 12; m++) {
                        totalDays += yearData[m];
                    }
                    if (leapMonth > 0) {
                        totalDays += yearData[leapMonth + 1] || 29;
                    }
                }
            }

            // ç´¯åŠ å½“å¹´ä¹‹å‰æœˆä»½çš„å¤©æ•°
            if (year >= 1900 && year <= 2030) {
                const yearData = lunarData[year];
                const leapMonth = leapMonthData[year];
                
                for (let m = 1; m < month; m++) {
                    totalDays += yearData[m];
                }
                
                // å¦‚æœç›®æ ‡åœ¨é—°æœˆä¹‹åï¼ŒåŠ ä¸Šé—°æœˆå¤©æ•°
                if (leapMonth > 0 && leapMonth < month) {
                    totalDays += yearData[leapMonth + 1] || 29;
                }
                
                // å¦‚æœæ˜¯é—°æœˆ
                if (isLeap && leapMonth === month) {
                    // å·²ç»ç®—äº†æ­£å¸¸æœˆä»½ï¼Œç°åœ¨åŠ ä¸Šé—°æœˆä¹‹å‰çš„å¤©æ•°
                    // é—°æœˆå¤©æ•°å°±æ˜¯ yearData[leapMonth + 1]
                }
                
                // åŠ ä¸Šå½“æœˆå¤©æ•°
                totalDays += day - 1;
            }

            const resultDate = new Date(baseDate.getTime() + totalDays * 24 * 60 * 60 * 1000);
            return resultDate;
        }

        // ============ è®¡ç®—æ˜Ÿå®¿ ============
        // ä¼ ç»ŸäºŒåå…«æ˜Ÿå®¿å€¼æ—¥ç®—æ³•
        // åŸºäºå†œå†æ—¥æœŸï¼Œæ¯å¹´æ­£æœˆåˆä¸€å¯¹åº”ç‰¹å®šæ˜Ÿå®¿ï¼Œç„¶åæŒ‰é¡ºåºæ¨ç®—
        function calculateStarByLunar(year, month, day, isLeap) {
            // è·å–è¯¥å¹´æ­£æœˆåˆä¸€å¯¹åº”çš„æ˜Ÿå®¿ç´¢å¼•
            let baseIndex = yearBaseStar[year];
            if (baseIndex === undefined) {
                // å¦‚æœå¹´ä»½ä¸åœ¨è¡¨ä¸­ï¼Œä½¿ç”¨è¿‘ä¼¼è®¡ç®—
                baseIndex = ((year - 1900) * 9) % 28;
            }

            // è®¡ç®—ä»æ­£æœˆåˆä¸€åˆ°ç›®æ ‡æ—¥æœŸçš„å¤©æ•°
            let daysFromNewYear = 0;
            
            if (year >= 1900 && year <= 2030) {
                const yearData = lunarData[year];
                const leapMonth = leapMonthData[year];
                
                // ç´¯åŠ ä¹‹å‰æœˆä»½çš„å¤©æ•°
                for (let m = 1; m < month; m++) {
                    daysFromNewYear += yearData[m];
                }
                
                // å¦‚æœé—°æœˆåœ¨ç›®æ ‡æœˆä»½ä¹‹å‰ï¼ŒåŠ ä¸Šé—°æœˆå¤©æ•°
                if (leapMonth > 0 && leapMonth < month) {
                    daysFromNewYear += yearData[leapMonth + 1] || 29;
                }
                
                // å¦‚æœæ˜¯é—°æœˆï¼ŒåŠ ä¸Šæ­£å¸¸æœˆä»½çš„å¤©æ•°
                if (isLeap && leapMonth === month) {
                    daysFromNewYear += yearData[month];
                }
                
                // åŠ ä¸Šå½“æœˆå¤©æ•°
                daysFromNewYear += day - 1;
            }

            // è®¡ç®—æ˜Ÿå®¿ç´¢å¼• (28æ˜Ÿå®¿å¾ªç¯)
            const starIndex = (baseIndex + daysFromNewYear) % 28;
            return starIndex;
        }

        // ä¸»æµ‹ç®—å‡½æ•°
        function calculateStar() {
            let starIndex = -1;
            let displayDate = '';

            if (currentDateType === 'solar') {
                // é˜³å†æ¨¡å¼
                const dateInput = document.getElementById('solarDate').value;
                if (!dateInput) {
                    alert('è¯·å…ˆé€‰æ‹©ç”Ÿæ—¥ï¼');
                    return;
                }

                const date = new Date(dateInput);
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();

                // è½¬æ¢ä¸ºå†œå†
                const lunar = solarToLunar(year, month, day);
                if (lunar) {
                    starIndex = calculateStarByLunar(lunar.year, lunar.month, lunar.day, lunar.isLeap);
                    displayDate = `${year}å¹´${month}æœˆ${day}æ—¥`;
                }
            } else {
                // å†œå†æ¨¡å¼
                const year = parseInt(document.getElementById('lunarYear').value);
                const month = parseInt(document.getElementById('lunarMonth').value);
                const day = parseInt(document.getElementById('lunarDay').value);
                const isLeap = document.getElementById('isLeapMonth').checked;

                if (!year || !month || !day) {
                    alert('è¯·å®Œæ•´é€‰æ‹©å†œå†ç”Ÿæ—¥ï¼');
                    return;
                }

                // éªŒè¯é—°æœˆ
                const leapMonth = leapMonthData[year];
                if (isLeap && leapMonth !== month) {
                    alert(`${year}å¹´çš„é—°æœˆæ˜¯${leapMonth}æœˆï¼Œè¯·é‡æ–°é€‰æ‹©ï¼`);
                    return;
                }

                starIndex = calculateStarByLunar(year, month, day, isLeap);
                
                // è½¬æ¢ä¸ºé˜³å†æ˜¾ç¤º
                const solarDate = lunarToSolar(year, month, day, isLeap);
                displayDate = `${solarDate.getFullYear()}å¹´${solarDate.getMonth() + 1}æœˆ${solarDate.getDate()}æ—¥`;
            }

            if (starIndex < 0) {
                alert('æ—¥æœŸè®¡ç®—å‡ºé”™ï¼Œè¯·é‡è¯•ï¼');
                return;
            }

            // æ˜¾ç¤ºåŠ è½½
            document.getElementById('inputSection').style.display = 'none';
            document.getElementById('loading').classList.add('show');

            // æ¨¡æ‹Ÿè®¡ç®—å»¶è¿Ÿ
            setTimeout(() => {
                showResult(starIndex, displayDate);
            }, 1500);
        }

        // é˜³å†è½¬å†œå†ï¼ˆç®€åŒ–ç‰ˆï¼‰
        function solarToLunar(year, month, day) {
            // åŸºå‡†æ—¥æœŸï¼š1900å¹´1æœˆ31æ—¥æ˜¯å†œå†1900å¹´æ­£æœˆåˆä¸€
            const baseDate = new Date(1900, 0, 31);
            const targetDate = new Date(year, month - 1, day);
            let diffDays = Math.floor((targetDate - baseDate) / (24 * 60 * 60 * 1000));

            let lunarYear = 1900;
            let lunarMonth = 1;
            let lunarDay = 1;
            let isLeap = false;

            // é€å¹´è®¡ç®—
            while (lunarYear <= 2030) {
                const yearData = lunarData[lunarYear];
                const leapMonth = leapMonthData[lunarYear];
                let yearDays = 0;

                // è®¡ç®—è¯¥å¹´æ€»å¤©æ•°
                for (let m = 1; m <= 12; m++) {
                    yearDays += yearData[m];
                }
                if (leapMonth > 0) {
                    yearDays += yearData[leapMonth + 1] || 29;
                }

                if (diffDays < yearDays) {
                    // åœ¨è¯¥å¹´å†…
                    let remainingDays = diffDays;
                    
                    for (let m = 1; m <= 12; m++) {
                        const monthDays = yearData[m];
                        
                        // æ£€æŸ¥é—°æœˆ
                        if (leapMonth === m && (yearData[leapMonth + 1] || 29) <= remainingDays) {
                            if (remainingDays < monthDays + (yearData[leapMonth + 1] || 29)) {
                                lunarMonth = m;
                                lunarDay = remainingDays + 1;
                                isLeap = false;
                                return { year: lunarYear, month: lunarMonth, day: lunarDay, isLeap };
                            }
                            remainingDays -= monthDays;
                            if (remainingDays < (yearData[leapMonth + 1] || 29)) {
                                lunarMonth = m;
                                lunarDay = remainingDays + 1;
                                isLeap = true;
                                return { year: lunarYear, month: lunarMonth, day: lunarDay, isLeap };
                            }
                            remainingDays -= (yearData[leapMonth + 1] || 29);
                        } else {
                            if (remainingDays < monthDays) {
                                lunarMonth = m;
                                lunarDay = remainingDays + 1;
                                isLeap = false;
                                return { year: lunarYear, month: lunarMonth, day: lunarDay, isLeap };
                            }
                            remainingDays -= monthDays;
                        }
                    }
                    break;
                }

                diffDays -= yearDays;
                lunarYear++;
            }

            return null;
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(index, displayDate) {
            const star = starData[index];

            document.getElementById('loading').classList.remove('show');
            document.getElementById('resultSection').classList.add('show');

            // å¡«å……æ•°æ®
            document.getElementById('starIcon').textContent = star.icon;
            document.getElementById('starName').textContent = star.name;
            document.getElementById('starPinyin').textContent = star.pinyin;
            document.getElementById('starAnimal').textContent = star.animal;
            document.getElementById('starMeaning').textContent = star.meaning;
            document.getElementById('starPersonality').textContent = star.personality;
            document.getElementById('fortuneCareer').textContent = star.fortune.career;
            document.getElementById('fortuneWealth').textContent = star.fortune.wealth;
            document.getElementById('fortuneLove').textContent = star.fortune.love;

            // é«˜äº®æ˜Ÿå®¿åˆ—è¡¨
            document.querySelectorAll('.star-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });

            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        // é‡æ–°æµ‹ç®—
        function resetCalc() {
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('inputSection').style.display = 'block';
            document.getElementById('solarDate').value = '';
            document.getElementById('dateInfo').classList.add('hidden');

            document.querySelectorAll('.star-item').forEach(item => {
                item.classList.remove('active');
            });

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆ†äº«ç»“æœ
        function shareResult() {
            const starName = document.getElementById('starName').textContent;
            const shareText = `âœ¨ æˆ‘çš„å¤©å‘½æ˜Ÿå®¿æ˜¯ã€${starName}ã€‘âœ¨\n\nå¿«æ¥æµ‹æµ‹ä½ çš„äºŒåå…«æ˜Ÿå®¿å§ï¼\n`;

            if (navigator.share) {
                navigator.share({
                    title: 'äºŒåå…«æ˜Ÿå®¿æµ‹ç®—',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(shareText + window.location.href).then(() => {
                    alert('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                });
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>