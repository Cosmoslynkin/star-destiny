<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>âœ¨ äºŒåå…«æ˜Ÿå®¿æµ‹ç®— | 28 Lunar Mansions âœ¨</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.min.js?v=2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', 'Noto Serif SC', serif;
            background: linear-gradient(180deg, #0a0a1a 0%, #1a1a3e 30%, #2d1b69 70%, #0f0f23 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
            -webkit-overflow-scrolling: touch;
        }
        
        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        /* æµæ˜Ÿ */
        .shooting-star {
            position: absolute;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #fff, transparent);
            animation: shoot 3s linear infinite;
            opacity: 0;
        }
        
        @keyframes shoot {
            0% { transform: translateX(-100px) translateY(100px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateX(100vw) translateY(-100px); opacity: 0; }
        }
        
        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 1;
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-bottom: 100px;
        }
        
        /* é¡¶éƒ¨æ  */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }
        
        /* è¯­è¨€åˆ‡æ¢æŒ‰é’® */
        .lang-switch {
            display: flex;
            gap: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 4px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .lang-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 16px;
            background: transparent;
            color: #888;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .lang-btn.active {
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            color: #1a1a3e;
            font-weight: bold;
        }
        
        /* æ ‡é¢˜ */
        .header {
            text-align: center;
            padding: 20px 0;
        }
        
        .title {
            font-size: 2.2em;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffaa00, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px;
            letter-spacing: 8px;
        }
        
        .title-en {
            font-size: 1.4em;
            color: #ffd700;
            margin-bottom: 10px;
            letter-spacing: 4px;
        }
        
        .subtitle {
            color: #888;
            font-size: 0.9em;
            letter-spacing: 2px;
        }
        
        /* æ¨¡å¼åˆ‡æ¢ */
        .mode-switch {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            padding: 10px 25px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.3);
            color: #888;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
        }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 25px 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1em;
            letter-spacing: 2px;
        }
        
        .date-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1.1em;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }
        
        .date-input:focus {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        /* å†œå†é€‰æ‹©å™¨ */
        .lunar-selectors {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 10px;
            width: 100%;
        }
        
        .lunar-select {
            padding: 14px 6px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            font-size: 0.95em;
            text-align: center;
            text-align-last: center;
            outline: none;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 48px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 100%;
        }
        
        .lunar-select:focus {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        
        .lunar-select option {
            background: #1a1a3e;
            color: #fff;
        }
        
        .solar-display {
            text-align: center;
            padding: 10px;
            margin-top: 15px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
            font-size: 0.9em;
            color: #ffd700;
            display: none;
        }
        
        .solar-display.show {
            display: block;
        }
        
        /* æµ‹ç®—æŒ‰é’® */
        .calc-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 50%, #ffd700 100%);
            color: #1a1a3e;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 4px;
            margin-top: 10px;
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
        }
        
        .calc-btn:active {
            transform: translateY(0);
        }
        
        /* ç»“æœåŒºåŸŸ */
        .result-section {
            display: none;
            animation: fadeIn 0.8s ease;
        }
        
        .result-section.show {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* æ˜Ÿå®¿å¡ç‰‡ */
        .star-card {
            background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,170,0,0.05) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            border-radius: 24px;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .star-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .star-icon {
            font-size: 4em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .star-name {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .star-name-en {
            font-size: 1.1em;
            color: #aaa;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .star-pinyin {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .star-animal {
            display: inline-block;
            background: rgba(255, 215, 0, 0.2);
            padding: 8px 20px;
            border-radius: 20px;
            color: #ffd700;
            font-size: 0.9em;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .star-meaning {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            position: relative;
            z-index: 1;
        }
        
        .meaning-title {
            color: #ffd700;
            font-size: 1em;
            margin-bottom: 10px;
            border-left: 3px solid #ffd700;
            padding-left: 10px;
        }
        
        .meaning-text {
            color: #ccc;
            line-height: 1.8;
            font-size: 0.95em;
        }
        
        .star-fortune {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        
        .fortune-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px 10px;
            border-radius: 12px;
            text-align: center;
        }
        
        .fortune-label {
            color: #888;
            font-size: 0.8em;
            margin-bottom: 5px;
        }
        
        .fortune-value {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* é‡æµ‹æŒ‰é’® */
        .reset-btn {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 12px;
            background: transparent;
            color: #ffd700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .reset-btn:hover {
            background: rgba(255, 215, 0, 0.1);
        }
        
        /* åˆ†äº«æŒ‰é’® */
        .share-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* åº•éƒ¨ */
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
            font-size: 0.8em;
            margin-top: auto;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* äºŒåå…«å®¿åˆ—è¡¨ */
        .star-list {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            margin: 15px 0 10px;
            padding: 12px 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            max-height: none;
            overflow: visible;
        }
        
        .star-item {
            text-align: center;
            padding: 10px 2px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            font-size: 0.7em;
            color: #888;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }
        
        .star-item.active {
            background: rgba(255, 215, 0, 0.3);
            color: #ffd700;
            font-weight: bold;
        }
        
        /* è¾“å…¥æ¨¡å¼å®¹å™¨ */
        .input-mode {
            display: none;
        }
        
        .input-mode.active {
            display: block;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 400px) {
            .container {
                padding: 15px;
                padding-bottom: 80px;
            }
            .title {
                font-size: 1.6em;
                letter-spacing: 3px;
            }
            .title-en {
                font-size: 1.1em;
            }
            .star-name {
                font-size: 1.8em;
            }
            .star-icon {
                font-size: 2.8em;
            }
            .star-list {
                grid-template-columns: repeat(7, 1fr);
                gap: 4px;
                padding: 10px 6px;
            }
            .star-item {
                font-size: 0.65em;
                padding: 8px 1px;
                min-height: 32px;
            }
            .lunar-selectors {
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
            }
            .lunar-select {
                font-size: 0.85em;
                padding: 12px 4px;
                min-height: 44px;
            }
            .input-section {
                padding: 20px 15px;
            }
        }
        
        @media (max-width: 360px) {
            .star-list {
                grid-template-columns: repeat(7, 1fr);
                gap: 3px;
            }
            .star-item {
                font-size: 0.6em;
                padding: 6px 1px;
            }
            .lunar-select {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <!-- è¯­è¨€åˆ‡æ¢ -->
        <div class="top-bar">
            <div></div>
            <div class="lang-switch">
                <button class="lang-btn active" data-lang="zh" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
                <button class="lang-btn" data-lang="en" onclick="switchLanguage('en')">English</button>
            </div>
        </div>
        
        <header class="header">
            <h1 class="title" data-i18n="title">äºŒåå…«æ˜Ÿå®¿</h1>
            <p class="title-en" data-i18n="titleEn">28 Lunar Mansions</p>
            <p class="subtitle" data-i18n="subtitle">æ¢ç´¢ä½ çš„å¤©å‘½æ˜Ÿå®¿ Â· Discover Your Destiny Star</p>
        </header>

        <section class="input-section" id="inputSection">
            <!-- æ¨¡å¼åˆ‡æ¢ -->
            <div class="mode-switch">
                <button class="mode-btn active" id="solarBtn" onclick="switchMode('solar')">â˜€ï¸ <span data-i18n="solar">é˜³å†</span></button>
                <button class="mode-btn" id="lunarBtn" onclick="switchMode('lunar')">ğŸŒ™ <span data-i18n="lunar">å†œå†</span></button>
            </div>

            <!-- é˜³å†è¾“å…¥ -->
            <div class="input-mode active" id="solarInput">
                <div class="input-group">
                    <label class="input-label" data-i18n="selectSolar">âœ¨ é€‰æ‹©ä½ çš„é˜³å†ç”Ÿæ—¥</label>
                    <input type="date" class="date-input" id="birthDate" max="">
                </div>
            </div>

            <!-- å†œå†è¾“å…¥ -->
            <div class="input-mode" id="lunarInput">
                <div class="input-group">
                    <label class="input-label" data-i18n="selectLunar">ğŸŒ™ é€‰æ‹©ä½ çš„å†œå†ç”Ÿæ—¥</label>
                    <div class="lunar-selectors">
                        <select class="lunar-select" id="lunarYear">
                            <option value="" data-i18n="year">å¹´ä»½</option>
                        </select>
                        <select class="lunar-select" id="lunarMonth">
                            <option value="" data-i18n="month">æœˆä»½</option>
                        </select>
                        <select class="lunar-select" id="lunarDay">
                            <option value="" data-i18n="day">æ—¥æœŸ</option>
                        </select>
                    </div>
                </div>
                <div class="solar-display" id="solarDisplay">
                    <span data-i18n="solarDate">å¯¹åº”é˜³å†</span>ï¼š<span id="convertedSolar">--</span>
                </div>
            </div>

            <button class="calc-btn" onclick="calculateStar()">
                <span data-i18n="calculate">ğŸ”® æµ‹ç®—æ˜Ÿå®¿</span>
            </button>

            <!-- äºŒåå…«å®¿åˆ—è¡¨ -->
            <div class="star-list" id="starList">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>

        <section class="loading" id="loading">
            <div class="spinner"></div>
            <p data-i18n="calculating">æ­£åœ¨æ¨ç®—æ˜Ÿå®¿...</p>
        </section>

        <section class="result-section" id="resultSection">
            <div class="star-card">
                <div class="star-icon" id="starIcon">â­</div>
                <div class="star-name" id="starName">--</div>
                <div class="star-name-en" id="starNameEn">--</div>
                <div class="star-pinyin" id="starPinyin">--</div>
                <div class="star-animal" id="starAnimal">--</div>
                
                <div class="star-meaning">
                    <div class="meaning-title" data-i18n="meaningTitle">æ˜Ÿå®¿å¯“æ„</div>
                    <div class="meaning-text" id="starMeaning">--</div>
                </div>

                <div class="star-meaning">
                    <div class="meaning-title" data-i18n="personalityTitle">æ€§æ ¼ç‰¹å¾</div>
                    <div class="meaning-text" id="starPersonality">--</div>
                </div>

                <div class="star-fortune">
                    <div class="fortune-item">
                        <div class="fortune-label" data-i18n="career">äº‹ä¸š</div>
                        <div class="fortune-value" id="fortuneCareer">â­â­â­â­</div>
                    </div>
                    <div class="fortune-item">
                        <div class="fortune-label" data-i18n="wealth">è´¢è¿</div>
                        <div class="fortune-value" id="fortuneWealth">â­â­â­</div>
                    </div>
                    <div class="fortune-item">
                        <div class="fortune-label" data-i18n="love">å§»ç¼˜</div>
                        <div class="fortune-value" id="fortuneLove">â­â­â­â­â­</div>
                    </div>
                </div>
            </div>

            <button class="share-btn" onclick="shareResult()">
                <span data-i18n="share">ğŸ“¤ åˆ†äº«ç»“æœ</span>
            </button>
            <button class="reset-btn" onclick="resetCalc()">
                <span data-i18n="reset">ğŸ”„ é‡æ–°æµ‹ç®—</span>
            </button>
        </section>

        <footer class="footer">
            <p data-i18n="footer">äºŒåå…«æ˜Ÿå®¿ Â· 28 Lunar Mansions</p>
            <p style="margin-top: 10px; opacity: 0.6;" data-i18n="source">ã€Šå®¿æ›œç»ã€‹Â· Xiuyao Sutra</p>
            <p style="margin-top: 5px; opacity: 0.4; font-size: 0.75em;">v3.0.0 (Bilingual Edition)</p>
        </footer>
    </div>

    <script>
        // å½“å‰è¯­è¨€å’Œæ¨¡å¼
        let currentLang = 'zh';
        let currentMode = 'solar';

        // å¤šè¯­è¨€ç¿»è¯‘
        const i18n = {
            zh: {
                title: 'äºŒåå…«æ˜Ÿå®¿',
                titleEn: '28 Lunar Mansions',
                subtitle: 'æ¢ç´¢ä½ çš„å¤©å‘½æ˜Ÿå®¿ Â· Discover Your Destiny Star',
                solar: 'é˜³å†',
                lunar: 'å†œå†',
                selectSolar: 'âœ¨ é€‰æ‹©ä½ çš„é˜³å†ç”Ÿæ—¥',
                selectLunar: 'ğŸŒ™ é€‰æ‹©ä½ çš„å†œå†ç”Ÿæ—¥',
                year: 'å¹´ä»½',
                month: 'æœˆä»½',
                day: 'æ—¥æœŸ',
                solarDate: 'å¯¹åº”é˜³å†',
                calculate: 'ğŸ”® æµ‹ç®—æ˜Ÿå®¿',
                calculating: 'æ­£åœ¨æ¨ç®—æ˜Ÿå®¿...',
                meaningTitle: 'æ˜Ÿå®¿å¯“æ„',
                personalityTitle: 'æ€§æ ¼ç‰¹å¾',
                career: 'äº‹ä¸š',
                wealth: 'è´¢è¿',
                love: 'å§»ç¼˜',
                share: 'ğŸ“¤ åˆ†äº«ç»“æœ',
                reset: 'ğŸ”„ é‡æ–°æµ‹ç®—',
                footer: 'äºŒåå…«æ˜Ÿå®¿ Â· 28 Lunar Mansions',
                source: 'ã€Šå®¿æ›œç»ã€‹Â· Xiuyao Sutra',
                shareText: 'âœ¨ æˆ‘çš„å¤©å‘½æ˜Ÿå®¿æ˜¯ã€{star}ã€‘âœ¨\n\nå¿«æ¥æµ‹æµ‹ä½ çš„äºŒåå…«æ˜Ÿå®¿å§ï¼',
                alertSelectDate: 'è¯·å…ˆé€‰æ‹©ç”Ÿæ—¥ï¼',
                alertSelectLunar: 'è¯·å…ˆé€‰æ‹©å®Œæ•´çš„å†œå†ç”Ÿæ—¥ï¼',
                copied: 'ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼'
            },
            en: {
                title: 'äºŒåå…«æ˜Ÿå®¿',
                titleEn: '28 Lunar Mansions',
                subtitle: 'Discover Your Destiny Star Â· æ¢ç´¢ä½ çš„å¤©å‘½æ˜Ÿå®¿',
                solar: 'Solar',
                lunar: 'Lunar',
                selectSolar: 'âœ¨ Select Your Solar Birthday',
                selectLunar: 'ğŸŒ™ Select Your Lunar Birthday',
                year: 'Year',
                month: 'Month',
                day: 'Day',
                solarDate: 'Solar Date',
                calculate: 'ğŸ”® Calculate Star',
                calculating: 'Calculating your destiny star...',
                meaningTitle: 'Star Meaning',
                personalityTitle: 'Personality Traits',
                career: 'Career',
                wealth: 'Wealth',
                love: 'Love',
                share: 'ğŸ“¤ Share Result',
                reset: 'ğŸ”„ Recalculate',
                footer: '28 Lunar Mansions Â· äºŒåå…«æ˜Ÿå®¿',
                source: 'Xiuyao Sutra Â· ã€Šå®¿æ›œç»ã€‹',
                shareText: 'âœ¨ My Destiny Star is ã€{star}ã€‘âœ¨\n\nDiscover your 28 Lunar Mansions!',
                alertSelectDate: 'Please select your birthday first!',
                alertSelectLunar: 'Please select complete lunar birthday!',
                copied: 'Result copied to clipboard!'
            }
        };

        // äºŒåå…«æ˜Ÿå®¿æ•°æ®ï¼ˆåŒè¯­ï¼‰
        const starData = [
            { 
                name: 'è§’æœ¨è›Ÿ', nameEn: 'Horn (Jiao)', pinyin: 'JiÇo MÃ¹ JiÄo', animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸€å®¿', animalEn: '1st of Azure Dragon',
                icon: 'ğŸ‰', 
                meaning: { zh: 'è§’å®¿ä¸ºä¸œæ–¹è‹é¾™ä¹‹é¦–ï¼Œè±¡å¾æ–°çš„å¼€å§‹å’Œè¿›å–ç²¾ç¥ã€‚è§’å®¿ä¸»æ˜¥ç”Ÿä¹‹æ°”ï¼Œä»£è¡¨ä¸‡ç‰©å¤è‹ã€ç”Ÿæœºå‹ƒå‹ƒã€‚', en: 'The Horn is the head of the Azure Dragon, symbolizing new beginnings and enterprising spirit. It governs the energy of spring, representing revival and vitality.' },
                personality: { zh: 'ä½ å…·æœ‰å¼€æ‹“ç²¾ç¥ï¼Œå‹‡äºåˆ›æ–°ï¼Œå–œæ¬¢æŒ‘æˆ˜æ–°äº‹ç‰©ã€‚æ€§æ ¼ç›´ç‡ï¼Œæœ‰é¢†å¯¼æ‰èƒ½ï¼Œå–„äºå¼€åˆ›å±€é¢ã€‚ä¸ºäººæ­£ç›´ï¼Œæœ‰æ­£ä¹‰æ„Ÿã€‚', en: 'You are pioneering, innovative, and enjoy challenging new things. You are straightforward, have leadership skills, and excel at creating opportunities. You are upright and have a sense of justice.' },
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'äº¢é‡‘é¾™', nameEn: 'Neck (Kang)', pinyin: 'KÃ ng JÄ«n LÃ³ng', animal: 'ä¸œæ–¹è‹é¾™ç¬¬äºŒå®¿', animalEn: '2nd of Azure Dragon',
                icon: 'ğŸ²', 
                meaning: { zh: 'äº¢å®¿è±¡å¾é¾™çš„å’½å–‰ï¼Œä¸»å¨ä¸¥å’ŒæƒåŠ¿ã€‚ä»£è¡¨åˆšå¼ºã€åšæ¯…çš„å“è´¨ï¼Œæœ‰æŠ¤ä½‘ä¹‹åŠ›ã€‚', en: 'The Neck symbolizes the throat of the dragon, governing dignity and power. It represents strength, perseverance, and protective energy.' },
                personality: { zh: 'ä½ æ€§æ ¼åˆšå¼ºï¼Œæ„å¿—åšå®šï¼Œä¸è½»æ˜“æ”¾å¼ƒã€‚æœ‰è´£ä»»æ„Ÿï¼Œé‡æƒ…ä¹‰ï¼Œå¯¹æœ‹å‹å¿ è¯šã€‚åšäº‹æœ‰é­„åŠ›ï¼Œä½†æœ‰æ—¶ä¼šè¿‡äºå›ºæ‰§ã€‚', en: 'You are strong-willed and determined, never giving up easily. You have a sense of responsibility, value relationships, and are loyal to friends. You are courageous, though sometimes stubborn.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'æ°åœŸè²‰', nameEn: 'Root (Di)', pinyin: 'DÄ« TÇ” HÃ©', animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸‰å®¿', animalEn: '3rd of Azure Dragon',
                icon: 'ğŸ¦¡', 
                meaning: { zh: 'æ°å®¿ä¸ºé¾™èƒ¸ï¼Œè±¡å¾æ ¹åŸºå’Œç¨³é‡ã€‚ä¸»å®‰å®šã€è¸å®ï¼Œæœ‰å®ˆæˆä¹‹èƒ½ã€‚', en: 'The Root represents the chest of the dragon, symbolizing foundation and stability. It governs peace, steadiness, and preservation.' },
                personality: { zh: 'ä½ æ€§æ ¼ç¨³é‡è¸å®ï¼Œåšäº‹æœ‰æ¡ç†ã€‚é‡è§†å®¶åº­ï¼Œæœ‰ç†è´¢å¤´è„‘ã€‚ä¸ºäººè¯šå®å¯é ï¼Œæ˜¯å€¼å¾—ä¿¡èµ–çš„æœ‹å‹ã€‚', en: 'You are steady and methodical. You value family and have financial acumen. You are honest, reliable, and a trustworthy friend.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'æˆ¿æ—¥å…”', nameEn: 'Room (Fang)', pinyin: 'FÃ¡ng RÃ¬ TÃ¹', animal: 'ä¸œæ–¹è‹é¾™ç¬¬å››å®¿', animalEn: '4th of Azure Dragon',
                icon: 'ğŸ°', 
                meaning: { zh: 'æˆ¿å®¿ä¸ºé¾™è…¹ï¼Œè±¡å¾ä¸°é¥¶å’Œç¾å¥½ã€‚ä¸»å‰ç¥¥ã€å¹¸ç¦ï¼Œä»£è¡¨æ¸©æŸ”å’Œå–„è‰¯ã€‚', en: 'The Room represents the belly of the dragon, symbolizing abundance and beauty. It governs auspiciousness, happiness, gentleness, and kindness.' },
                personality: { zh: 'ä½ æ€§æ ¼æ¸©å’Œï¼Œå¿ƒåœ°å–„è‰¯ï¼Œæœ‰åŒæƒ…å¿ƒã€‚å–„äºä¸äººç›¸å¤„ï¼Œäººç¼˜å¥½ã€‚è¿½æ±‚ç¾å¥½äº‹ç‰©ï¼Œæœ‰è‰ºæœ¯å¤©èµ‹ã€‚', en: 'You are gentle, kind-hearted, and compassionate. You get along well with others and are popular. You pursue beauty and have artistic talent.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'å¿ƒæœˆç‹', nameEn: 'Heart (Xin)', pinyin: 'XÄ«n YuÃ¨ HÃº', animal: 'ä¸œæ–¹è‹é¾™ç¬¬äº”å®¿', animalEn: '5th of Azure Dragon',
                icon: 'ğŸ¦Š', 
                meaning: { zh: 'å¿ƒå®¿ä¸ºé¾™å¿ƒï¼Œè±¡å¾æ™ºæ…§å’Œçµæ€§ã€‚ä¸»èªæ…§ã€æœºæ•ï¼Œæœ‰æ´å¯Ÿäººå¿ƒä¹‹èƒ½ã€‚', en: 'The Heart represents the heart of the dragon, symbolizing wisdom and spirituality. It governs intelligence, keenness, and insight into human nature.' },
                personality: { zh: 'ä½ èªæ˜æœºæ™ºï¼Œååº”æ•æ·ï¼Œå–„äºå¯Ÿè¨€è§‚è‰²ã€‚æœ‰é­…åŠ›ï¼Œå¼‚æ€§ç¼˜å¥½ã€‚ä½†æœ‰æ—¶ä¼šæƒ…ç»ªåŒ–ï¼Œéœ€è¦å­¦ä¼šæ§åˆ¶æƒ…æ„Ÿã€‚', en: 'You are clever, quick-witted, and good at reading people. You are charming and popular with the opposite sex, though sometimes emotional.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'å°¾ç«è™', nameEn: 'Tail (Wei)', pinyin: 'WÄ›i HuÇ’ HÇ”', animal: 'ä¸œæ–¹è‹é¾™ç¬¬å…­å®¿', animalEn: '6th of Azure Dragon',
                icon: 'ğŸ…', 
                meaning: { zh: 'å°¾å®¿ä¸ºé¾™å°¾ï¼Œè±¡å¾åŠ›é‡å’Œå¨ä¸¥ã€‚ä¸»å‹‡çŒ›ã€æœæ–­ï¼Œæœ‰å†²é”‹é™·é˜µä¹‹å‹‡ã€‚', en: 'The Tail represents the tail of the dragon, symbolizing strength and majesty. It governs courage, decisiveness, and the bravery to charge forward.' },
                personality: { zh: 'ä½ æ€§æ ¼è±ªçˆ½ï¼Œæœ‰å†’é™©ç²¾ç¥ï¼Œæ•¢äºæ‹¼æã€‚ä¸ºäººä»—ä¹‰ï¼Œè·¯è§ä¸å¹³ä¼šæ‹”åˆ€ç›¸åŠ©ã€‚è„¾æ°”ç›´ç‡ï¼Œè¯´è¯ç›´æ¥ã€‚', en: 'You are bold, adventurous, and daring. You are righteous and stand up for others. You are straightforward in temperament and speech.' },
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'ç®•æ°´è±¹', nameEn: 'Winnowing Basket (Ji)', pinyin: 'JÄ« ShuÇ BÃ o', animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸ƒå®¿', animalEn: '7th of Azure Dragon',
                icon: 'ğŸ†', 
                meaning: { zh: 'ç®•å®¿ä¸ºé¾™å°¾æ‰€åŒ–ä¹‹é£ï¼Œè±¡å¾çµåŠ¨å’Œå˜åŒ–ã€‚ä¸»æ™ºæ…§ã€å˜é€šï¼Œæœ‰åŒ–é™©ä¸ºå¤·ä¹‹èƒ½ã€‚', en: 'The Winnowing Basket represents the wind from the dragon\'s tail, symbolizing agility and change. It governs wisdom, adaptability, and the ability to turn danger into safety.' },
                personality: { zh: 'ä½ æœºæ™ºçµæ´»ï¼Œå–„äºéšæœºåº”å˜ã€‚é€‚åº”èƒ½åŠ›å¼ºï¼Œèƒ½åœ¨å›°å¢ƒä¸­æ‰¾åˆ°å‡ºè·¯ã€‚å¤šæ‰å¤šè‰ºï¼Œå…´è¶£å¹¿æ³›ã€‚', en: 'You are resourceful, adaptable, and good at finding solutions in difficult situations. You are versatile with diverse interests.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'æ–—æœ¨ç¬', nameEn: 'Dipper (Dou)', pinyin: 'DÇ’u MÃ¹ XiÃ¨', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸€å®¿', animalEn: '1st of Black Tortoise',
                icon: 'ğŸ¦Œ', 
                meaning: { zh: 'æ–—å®¿ä¸ºåŒ—æ–—ä¹‹å½¢ï¼Œè±¡å¾æƒå¨å’ŒæŒ‡å¼•ã€‚ä¸»æ™ºæ…§ã€é¢†å¯¼åŠ›ï¼Œæœ‰æ˜è¾¨æ˜¯éä¹‹èƒ½ã€‚', en: 'The Dipper represents the Big Dipper, symbolizing authority and guidance. It governs wisdom, leadership, and the ability to distinguish right from wrong.' },
                personality: { zh: 'ä½ æœ‰é¢†å¯¼æ‰èƒ½ï¼Œå–„äºç»„ç»‡åè°ƒã€‚ä¸ºäººæ­£ç›´ï¼Œæœ‰åŸåˆ™æ€§ã€‚è¿½æ±‚å…¬å¹³æ­£ä¹‰ï¼Œé€‚åˆåšç®¡ç†è€…ã€‚', en: 'You have leadership skills and are good at organization. You are upright and principled, pursuing fairness and justice. Suitable for management roles.' },
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'ç‰›é‡‘ç‰›', nameEn: 'Ox (Niu)', pinyin: 'NiÃº JÄ«n NiÃº', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬äºŒå®¿', animalEn: '2nd of Black Tortoise',
                icon: 'ğŸ‚', 
                meaning: { zh: 'ç‰›å®¿è±¡å¾å‹¤åŠ³å’Œè¸å®ã€‚ä¸»å‹¤å¥‹ã€åšéŸ§ï¼Œæœ‰åƒè‹¦è€åŠ³ä¹‹å¾·ã€‚', en: 'The Ox symbolizes diligence and steadiness. It governs hard work, perseverance, and the virtue of enduring hardship.' },
                personality: { zh: 'ä½ å‹¤åŠ³è¸å®ï¼Œåšäº‹è®¤çœŸè´Ÿè´£ã€‚æœ‰è€å¿ƒå’Œæ¯…åŠ›ï¼Œèƒ½åšæŒç›®æ ‡ã€‚ä¸ºäººè¯šæ³ï¼Œé‡ä¿¡å®ˆè¯ºã€‚', en: 'You are hardworking, conscientious, patient, and persistent. You are sincere and keep your promises.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'å¥³åœŸè ', nameEn: 'Girl (NÃ¼)', pinyin: 'NÇš TÇ” FÃº', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸‰å®¿', animalEn: '3rd of Black Tortoise',
                icon: 'ğŸ¦‡', 
                meaning: { zh: 'å¥³å®¿è±¡å¾æ™ºæ…§å’Œçµå·§ã€‚ä¸»æœºæ•ã€èªæ…§ï¼Œæœ‰å·§æ€å¦™æƒ³ä¹‹èƒ½ã€‚', en: 'The Girl symbolizes wisdom and dexterity. It governs cleverness, intelligence, and creative ideas.' },
                personality: { zh: 'ä½ å¿ƒæ€ç»†è…»ï¼Œè§‚å¯ŸåŠ›æ•é”ã€‚æ“…é•¿ç»†èŠ‚å·¥ä½œï¼Œæœ‰æ‰‹å·¥è‰ºå¤©èµ‹ã€‚ä¸ºäººæ¸©æŸ”ï¼Œå–„è§£äººæ„ã€‚', en: 'You are meticulous with keen observation. You excel at detailed work and have craftsmanship talent. You are gentle and understanding.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'è™šæ—¥é¼ ', nameEn: 'Emptiness (Xu)', pinyin: 'XÅ« RÃ¬ ShÇ”', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬å››å®¿', animalEn: '4th of Black Tortoise',
                icon: 'ğŸ­', 
                meaning: { zh: 'è™šå®¿è±¡å¾è™šç©ºå’Œå˜åŒ–ã€‚ä¸»æœºå˜ã€çµæ´»ï¼Œæœ‰è¶‹å‰é¿å‡¶ä¹‹æ™ºã€‚', en: 'Emptiness symbolizes void and change. It governs adaptability, flexibility, and the wisdom to seek fortune and avoid misfortune.' },
                personality: { zh: 'ä½ èªæ˜çµæ´»ï¼Œå–„äºæŠŠæ¡æœºä¼šã€‚é€‚åº”åŠ›å¼ºï¼Œèƒ½åœ¨å˜åŒ–ä¸­æ±‚ç”Ÿå­˜ã€‚ä¸ºäººè°¨æ…ï¼Œåšäº‹æœ‰æ¡ç†ã€‚', en: 'You are clever, flexible, and good at seizing opportunities. You adapt well to change and are cautious and organized.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'å±æœˆç‡•', nameEn: 'Rooftop (Wei)', pinyin: 'WÄ“i YuÃ¨ YÃ n', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬äº”å®¿', animalEn: '5th of Black Tortoise',
                icon: 'ğŸ¦', 
                meaning: { zh: 'å±å®¿è±¡å¾å±æœºå’Œè½¬æœºã€‚ä¸»åŒ–é™©ä¸ºå¤·ï¼Œæœ‰é€¢å‡¶åŒ–å‰ä¹‹èƒ½ã€‚', en: 'The Rooftop symbolizes crisis and turning points. It governs turning danger into safety and misfortune into fortune.' },
                personality: { zh: 'ä½ æ€§æ ¼ç‹¬ç«‹ï¼Œæœ‰å†’é™©ç²¾ç¥ã€‚èƒ½åœ¨å±æœºä¸­ä¿æŒå†·é™ï¼Œæ‰¾åˆ°å‡ºè·¯ã€‚ä¸ºäººæœºè­¦ï¼Œå–„äºè‡ªæˆ‘ä¿æŠ¤ã€‚', en: 'You are independent and adventurous. You stay calm in crises and find solutions. You are vigilant and good at self-protection.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'å®¤ç«çŒª', nameEn: 'Encampment (Shi)', pinyin: 'ShÃ¬ HuÇ’ ZhÅ«', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬å…­å®¿', animalEn: '6th of Black Tortoise',
                icon: 'ğŸ·', 
                meaning: { zh: 'å®¤å®¿è±¡å¾æˆ¿å±‹å’Œå®‰å®šã€‚ä¸»å®‰å®šã€å®ˆæŠ¤ï¼Œæœ‰å®¶å®…å¹³å®‰ä¹‹ç¦ã€‚', en: 'The Encampment symbolizes housing and stability. It governs peace, protection, and family safety.' },
                personality: { zh: 'ä½ é‡è§†å®¶åº­ï¼Œæœ‰å®ˆæŠ¤å®¶äººçš„è´£ä»»æ„Ÿã€‚åšäº‹ç¨³é‡ï¼Œè¿½æ±‚å®‰å®šã€‚ä¸ºäººå®½åšï¼Œæœ‰åŒ…å®¹å¿ƒã€‚', en: 'You value family and have a sense of responsibility to protect loved ones. You are steady, pursue stability, and are tolerant.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'å£æ°´è²', nameEn: 'Wall (Bi)', pinyin: 'BÃ¬ ShuÇ YÇ”', animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸ƒå®¿', animalEn: '7th of Black Tortoise',
                icon: 'ğŸº', 
                meaning: { zh: 'å£å®¿è±¡å¾å±éšœå’Œä¿æŠ¤ã€‚ä¸»é˜²å¾¡ã€å®ˆæŠ¤ï¼Œæœ‰é¿é‚ªæŠ¤èº«ä¹‹èƒ½ã€‚', en: 'The Wall symbolizes barriers and protection. It governs defense, guardianship, and warding off evil.' },
                personality: { zh: 'ä½ æ€§æ ¼è°¨æ…ï¼Œå–„äºé˜²èŒƒé£é™©ã€‚æœ‰ä¿æŠ¤æ¬²ï¼Œä¼šç…§é¡¾èº«è¾¹äººã€‚åšäº‹ç»†è‡´ï¼Œè¿½æ±‚å®Œç¾ã€‚', en: 'You are cautious and good at preventing risks. You are protective of those around you, meticulous, and perfectionist.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'å¥æœ¨ç‹¼', nameEn: 'Legs (Kui)', pinyin: 'KuÃ­ MÃ¹ LÃ¡ng', animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸€å®¿', animalEn: '1st of White Tiger',
                icon: 'ğŸº', 
                meaning: { zh: 'å¥å®¿è±¡å¾æ–‡é‡‡å’Œæ™ºæ…§ã€‚ä¸»æ–‡è¿ã€æ‰åï¼Œæœ‰æ–‡ç« ç›–ä¸–ä¹‹æ‰ã€‚', en: 'The Legs symbolize literary talent and wisdom. It governs literary fortune and talent for writing.' },
                personality: { zh: 'ä½ æœ‰æ–‡è‰ºå¤©èµ‹ï¼Œå–„äºè¡¨è¾¾ã€‚å–œæ¬¢å­¦ä¹ ï¼ŒçŸ¥è¯†é¢å¹¿ã€‚ä¸ºäººæ¸©å’Œï¼Œæœ‰ä¹¦å·æ°”ã€‚', en: 'You have artistic talent and are good at expression. You enjoy learning and have broad knowledge. You are gentle and scholarly.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'å¨„é‡‘ç‹—', nameEn: 'Bond (Lou)', pinyin: 'LÃ³u JÄ«n GÇ’u', animal: 'è¥¿æ–¹ç™½è™ç¬¬äºŒå®¿', animalEn: '2nd of White Tiger',
                icon: 'ğŸ•', 
                meaning: { zh: 'å¨„å®¿è±¡å¾å¿ è¯šå’Œå®ˆä¿¡ã€‚ä¸»è¯šä¿¡ã€å¿ å®ï¼Œæœ‰å®ˆæŠ¤ä¹‹å¾·ã€‚', en: 'The Bond symbolizes loyalty and trustworthiness. It governs integrity, faithfulness, and protective virtue.' },
                personality: { zh: 'ä½ å¿ è¯šå¯é ï¼Œé‡æƒ…ä¹‰ã€‚å¯¹æœ‹å‹çœŸè¯šï¼Œä¼šä¼¸å‡ºæ´æ‰‹ã€‚åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œå€¼å¾—ä¿¡èµ–ã€‚', en: 'You are loyal, reliable, and value relationships. You are sincere to friends and helpful. You finish what you start and are trustworthy.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'èƒƒåœŸé›‰', nameEn: 'Stomach (Wei)', pinyin: 'WÃ¨i TÇ” ZhÃ¬', animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸‰å®¿', animalEn: '3rd of White Tiger',
                icon: 'ğŸ¦š', 
                meaning: { zh: 'èƒƒå®¿è±¡å¾å¯Œè¶³å’Œæ”¶è—ã€‚ä¸»è´¢è¿ã€ç§¯è“„ï¼Œæœ‰è¡£é£Ÿæ— å¿§ä¹‹ç¦ã€‚', en: 'The Stomach symbolizes abundance and storage. It governs wealth, savings, and freedom from material want.' },
                personality: { zh: 'ä½ æœ‰ç†è´¢å¤´è„‘ï¼Œå–„äºç§¯ç´¯è´¢å¯Œã€‚åšäº‹åŠ¡å®ï¼Œä¸æµ®å¤¸ã€‚ä¸ºäººå¤§æ–¹ï¼Œä¹äºåŠ©äººã€‚', en: 'You have financial acumen and are good at accumulating wealth. You are practical, not flashy, generous, and helpful.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'æ˜´æ—¥é¸¡', nameEn: 'Hairy Head (Mao)', pinyin: 'MÇo RÃ¬ JÄ«', animal: 'è¥¿æ–¹ç™½è™ç¬¬å››å®¿', animalEn: '4th of White Tiger',
                icon: 'ğŸ“', 
                meaning: { zh: 'æ˜´å®¿è±¡å¾å…‰æ˜å’Œå¸Œæœ›ã€‚ä¸»å…‰æ˜ç£Šè½ï¼Œæœ‰å‰ç¨‹ä¼¼é”¦ä¹‹è±¡ã€‚', en: 'The Hairy Head symbolizes brightness and hope. It governs openness and a bright future.' },
                personality: { zh: 'ä½ æ€§æ ¼å…‰æ˜æ­£å¤§ï¼Œä¸æ‹˜å°èŠ‚ã€‚æœ‰è¿›å–å¿ƒï¼Œè¿½æ±‚å“è¶Šã€‚ä¸ºäººçƒ­å¿ƒï¼Œå–œæ¬¢å¸®åŠ©ä»–äººã€‚', en: 'You are open-minded and not petty. You are ambitious and pursue excellence. You are enthusiastic and helpful.' },
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'æ¯•æœˆä¹Œ', nameEn: 'Net (Bi)', pinyin: 'BÃ¬ YuÃ¨ WÅ«', animal: 'è¥¿æ–¹ç™½è™ç¬¬äº”å®¿', animalEn: '5th of White Tiger',
                icon: 'ğŸ¦â€â¬›', 
                meaning: { zh: 'æ¯•å®¿è±¡å¾å®Œæˆå’Œåœ†æ»¡ã€‚ä¸»åœ†æ»¡ã€æˆå°±ï¼Œæœ‰æˆåŠŸä¹‹è±¡ã€‚', en: 'The Net symbolizes completion and fulfillment. It governs accomplishment and success.' },
                personality: { zh: 'ä½ åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œè¿½æ±‚å®Œç¾ã€‚æœ‰æ¯…åŠ›èƒ½åšæŒï¼Œä¸è¾¾ç›®çš„ä¸ç½¢ä¼‘ã€‚ä¸ºäººè®¤çœŸï¼Œä¸€ä¸ä¸è‹Ÿã€‚', en: 'You finish what you start and pursue perfection. You are persistent and don\'t give up until you reach your goal. You are serious and meticulous.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'è§œç«çŒ´', nameEn: 'Turtle Beak (Zi)', pinyin: 'ZÄ« HuÇ’ HÃ³u', animal: 'è¥¿æ–¹ç™½è™ç¬¬å…­å®¿', animalEn: '6th of White Tiger',
                icon: 'ğŸ’', 
                meaning: { zh: 'è§œå®¿è±¡å¾æœºæ•å’Œçµå·§ã€‚ä¸»æœºæ™ºã€çµæ´»ï¼Œæœ‰éšæœºåº”å˜ä¹‹èƒ½ã€‚', en: 'The Turtle Beak symbolizes cleverness and dexterity. It governs wit, flexibility, and adaptability.' },
                personality: { zh: 'ä½ èªæ˜æœºçµï¼Œååº”å¿«ã€‚å–„äºäº¤é™…ï¼Œäººç¼˜å¥½ã€‚å¤šæ‰å¤šè‰ºï¼Œå…´è¶£å¹¿æ³›ã€‚', en: 'You are clever, quick-witted, and good at socializing. You are popular, versatile, and have diverse interests.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'å‚æ°´çŒ¿', nameEn: 'Three Stars (Shen)', pinyin: 'ShÄ“n ShuÇ YuÃ¡n', animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸ƒå®¿', animalEn: '7th of White Tiger',
                icon: 'ğŸ¦§', 
                meaning: { zh: 'å‚å®¿è±¡å¾æˆç†Ÿå’Œä¸°æ”¶ã€‚ä¸»æˆå°±ã€æ”¶è·ï¼Œæœ‰å¤§å™¨æ™šæˆä¹‹è±¡ã€‚', en: 'The Three Stars symbolize maturity and harvest. It governs achievement and late-blooming success.' },
                personality: { zh: 'ä½ æˆç†Ÿç¨³é‡ï¼Œæœ‰è¿œè§ã€‚åšäº‹æœ‰è®¡åˆ’ï¼Œæ­¥æ­¥ä¸ºè¥ã€‚ä¸ºäººè°¦è™šï¼Œä¸å¼ æ‰¬ã€‚', en: 'You are mature, steady, and farsighted. You plan carefully and advance step by step. You are humble and unassuming.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'äº•æœ¨çŠ´', nameEn: 'Well (Jing)', pinyin: 'JÇng MÃ¹ Ã€n', animal: 'å—æ–¹æœ±é›€ç¬¬ä¸€å®¿', animalEn: '1st of Vermilion Bird',
                icon: 'ğŸ¦', 
                meaning: { zh: 'äº•å®¿è±¡å¾æ°´æºå’Œæ»‹å…»ã€‚ä¸»æ¶¦æ³½ã€å…»è‚²ï¼Œæœ‰æºæºä¸æ–­ä¹‹ç¦ã€‚', en: 'The Well symbolizes water sources and nourishment. It governs nurturing and endless blessings.' },
                personality: { zh: 'ä½ æœ‰åŒ…å®¹å¿ƒï¼Œå–„äºç…§é¡¾ä»–äººã€‚æœ‰åˆ›é€ åŠ›ï¼Œæ€ç»´æ´»è·ƒã€‚ä¸ºäººæ…·æ…¨ï¼Œä¹äºåˆ†äº«ã€‚', en: 'You are inclusive and good at caring for others. You are creative and active-minded. You are generous and enjoy sharing.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'é¬¼é‡‘ç¾Š', nameEn: 'Ghost (Gui)', pinyin: 'GuÇ JÄ«n YÃ¡ng', animal: 'å—æ–¹æœ±é›€ç¬¬äºŒå®¿', animalEn: '2nd of Vermilion Bird',
                icon: 'ğŸ‘', 
                meaning: { zh: 'é¬¼å®¿è±¡å¾ç¥ç§˜å’Œç›´è§‰ã€‚ä¸»çµæ€§ã€ç›´è§‰ï¼Œæœ‰è¶…å‡¡æ„ŸçŸ¥ä¹‹èƒ½ã€‚', en: 'The Ghost symbolizes mystery and intuition. It governs spirituality, intuition, and extraordinary perception.' },
                personality: { zh: 'ä½ ç›´è§‰æ•é”ï¼Œæœ‰ç¬¬å…­æ„Ÿã€‚å–„äºè§‚å¯Ÿï¼Œèƒ½çœ‹é€äººå¿ƒã€‚ä¸ºäººç¥ç§˜ï¼Œæœ‰ç‹¬ç‰¹é­…åŠ›ã€‚', en: 'You have keen intuition and a sixth sense. You are observant and can see through people. You are mysterious with unique charm.' },
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'æŸ³åœŸç', nameEn: 'Willow (Liu)', pinyin: 'LiÇ” TÇ” ZhÄng', animal: 'å—æ–¹æœ±é›€ç¬¬ä¸‰å®¿', animalEn: '3rd of Vermilion Bird',
                icon: 'ğŸ¦Œ', 
                meaning: { zh: 'æŸ³å®¿è±¡å¾æŸ”éŸ§å’Œé€‚åº”ã€‚ä¸»é€‚åº”ã€å˜é€šï¼Œæœ‰ç™¾æŠ˜ä¸æŒ ä¹‹å¾·ã€‚', en: 'The Willow symbolizes flexibility and adaptability. It governs resilience and the virtue of perseverance.' },
                personality: { zh: 'ä½ æ€§æ ¼æ¸©å’Œï¼Œå–„äºé€‚åº”ç¯å¢ƒã€‚æœ‰éŸ§æ€§ï¼Œé‡åˆ°å›°éš¾ä¸é€€ç¼©ã€‚ä¸ºäººéšå’Œï¼Œå®¹æ˜“ç›¸å¤„ã€‚', en: 'You are gentle and adaptable. You are resilient and don\'t retreat from difficulties. You are easy-going and approachable.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'æ˜Ÿæ—¥é©¬', nameEn: 'Star (Xing)', pinyin: 'XÄ«ng RÃ¬ MÇ', animal: 'å—æ–¹æœ±é›€ç¬¬å››å®¿', animalEn: '4th of Vermilion Bird',
                icon: 'ğŸ´', 
                meaning: { zh: 'æ˜Ÿå®¿è±¡å¾å…‰æ˜å’Œå¸Œæœ›ã€‚ä¸»å‰ç¨‹ã€å‘å±•ï¼Œæœ‰å‰é€”æ— é‡ä¹‹è±¡ã€‚', en: 'The Star symbolizes brightness and hope. It governs future prospects and development with unlimited potential.' },
                personality: { zh: 'ä½ å……æ»¡æ´»åŠ›ï¼Œæœ‰è¿›å–å¿ƒã€‚å–œæ¬¢è‡ªç”±ï¼Œä¸å–œæ¬¢æŸç¼šã€‚ä¸ºäººä¹è§‚ï¼Œå……æ»¡æ­£èƒ½é‡ã€‚', en: 'You are energetic and ambitious. You love freedom and dislike constraints. You are optimistic and full of positive energy.' },
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            { 
                name: 'å¼ æœˆé¹¿', nameEn: 'Extended Net (Zhang)', pinyin: 'ZhÄng YuÃ¨ LÃ¹', animal: 'å—æ–¹æœ±é›€ç¬¬äº”å®¿', animalEn: '5th of Vermilion Bird',
                icon: 'ğŸ¦Œ', 
                meaning: { zh: 'å¼ å®¿è±¡å¾å±•å¼€å’Œå‘å±•ã€‚ä¸»æ‰©å¼ ã€å‘å±•ï¼Œæœ‰è’¸è’¸æ—¥ä¸Šä¹‹åŠ¿ã€‚', en: 'The Extended Net symbolizes expansion and development. It governs growth and thriving momentum.' },
                personality: { zh: 'ä½ æœ‰å¼€æ‹“ç²¾ç¥ï¼Œå–„äºæ‰©å±•äº‹ä¸šã€‚æœ‰é¢†å¯¼æ‰èƒ½ï¼Œèƒ½å¸¦é¢†å›¢é˜Ÿã€‚ä¸ºäººå¤§æ°”ï¼Œæœ‰æ ¼å±€ã€‚', en: 'You are pioneering and good at expanding business. You have leadership skills and can guide teams. You are magnanimous with great vision.' },
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            { 
                name: 'ç¿¼ç«è›‡', nameEn: 'Wings (Yi)', pinyin: 'YÃ¬ HuÇ’ ShÃ©', animal: 'å—æ–¹æœ±é›€ç¬¬å…­å®¿', animalEn: '6th of Vermilion Bird',
                icon: 'ğŸ', 
                meaning: { zh: 'ç¿¼å®¿è±¡å¾é£ç¿”å’Œè‡ªç”±ã€‚ä¸»è‡ªç”±ã€å˜åŒ–ï¼Œæœ‰æ— æ‹˜æ— æŸä¹‹æ€ã€‚', en: 'The Wings symbolize flight and freedom. They govern liberty, change, and an unrestrained nature.' },
                personality: { zh: 'ä½ çƒ­çˆ±è‡ªç”±ï¼Œä¸å–œæ¬¢è¢«æŸç¼šã€‚æ€ç»´æ´»è·ƒï¼Œåˆ›æ„å¤šã€‚ä¸ºäººç‹¬ç«‹ï¼Œæœ‰è‡ªå·±çš„æƒ³æ³•ã€‚', en: 'You love freedom and dislike being constrained. You are creative with an active mind. You are independent with your own ideas.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            { 
                name: 'è½¸æ°´èš“', nameEn: 'Chariot (Zhen)', pinyin: 'ZhÄ›n ShuÇ YÇn', animal: 'å—æ–¹æœ±é›€ç¬¬ä¸ƒå®¿', animalEn: '7th of Vermilion Bird',
                icon: 'ğŸ›', 
                meaning: { zh: 'è½¸å®¿è±¡å¾å½’å®¿å’Œåœ†æ»¡ã€‚ä¸»åœ†æ»¡ã€æˆå°±ï¼Œæœ‰å–„å§‹å–„ç»ˆä¹‹å¾·ã€‚', en: 'The Chariot symbolizes return and fulfillment. It governs completion and the virtue of finishing well what was started well.' },
                personality: { zh: 'ä½ åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œè¿½æ±‚å®Œç¾ç»“å±€ã€‚æœ‰è´£ä»»æ„Ÿï¼Œä¼šåšæŒåˆ°åº•ã€‚ä¸ºäººè¸å®ï¼Œå€¼å¾—ä¿¡èµ–ã€‚', en: 'You finish what you start, pursuing perfect endings. You have a sense of responsibility and persist to the end. You are dependable and trustworthy.' },
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            }
        ];

        // åˆå§‹åŒ–
        function init() {
            createStars();
            createStarList();
            initLunarSelectors();
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('birthDate').max = today;
            updateLanguage();
        }

        // åˆ‡æ¢è¯­è¨€
        function switchLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            updateLanguage();
        }

        // æ›´æ–°ç•Œé¢è¯­è¨€
        function updateLanguage() {
            const t = i18n[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                if (t[key]) {
                    el.textContent = t[key];
                }
            });
            document.title = currentLang === 'zh' ? 'âœ¨ äºŒåå…«æ˜Ÿå®¿æµ‹ç®— âœ¨' : 'âœ¨ 28 Lunar Mansions âœ¨';
        }

        // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.opacity = Math.random() * 0.8 + 0.2;
                starsContainer.appendChild(star);
            }
            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.top = Math.random() * 50 + '%';
                shootingStar.style.animationDelay = i * 5 + 's';
                starsContainer.appendChild(shootingStar);
            }
        }

        // åˆ›å»ºæ˜Ÿå®¿åˆ—è¡¨
        function createStarList() {
            const list = document.getElementById('starList');
            starData.forEach((star, index) => {
                const item = document.createElement('div');
                item.className = 'star-item';
                item.textContent = star.name.substring(0, 2);
                item.id = 'star-' + index;
                list.appendChild(item);
            });
        }

        // è·å–å¹²æ”¯å¹´
        function getGanZhi(year) {
            const gan = ['ç”²','ä¹™','ä¸™','ä¸','æˆŠ','å·±','åºš','è¾›','å£¬','ç™¸'];
            const zhi = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];
            const offset = year - 1900 + 36;
            return gan[offset % 10] + zhi[offset % 12];
        }

        // åˆå§‹åŒ–å†œå†é€‰æ‹©å™¨
        function initLunarSelectors() {
            const yearSelect = document.getElementById('lunarYear');
            const monthSelect = document.getElementById('lunarMonth');
            const daySelect = document.getElementById('lunarDay');

            for (let year = 1950; year <= 2026; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'å¹´ (' + getGanZhi(year) + ')';
                yearSelect.appendChild(option);
            }

            for (let month = 1; month <= 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = month + 'æœˆ';
                monthSelect.appendChild(option);
            }

            updateLunarDays();

            yearSelect.addEventListener('change', () => {
                updateLunarDays();
                showConvertedSolar();
            });
            monthSelect.addEventListener('change', () => {
                updateLunarDays();
                showConvertedSolar();
            });
            daySelect.addEventListener('change', showConvertedSolar);
        }

        // æ›´æ–°å†œå†æ—¥æœŸé€‰é¡¹
        function updateLunarDays() {
            const year = parseInt(document.getElementById('lunarYear').value);
            const month = parseInt(document.getElementById('lunarMonth').value);
            const daySelect = document.getElementById('lunarDay');
            if (!year || !month) return;

            const daysInMonth = getLunarDaysInMonth(year, month, false);
            const currentDay = parseInt(daySelect.value) || 1;

            daySelect.innerHTML = '<option value="">' + i18n[currentLang].day + '</option>';
            for (let day = 1; day <= daysInMonth; day++) {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = day + 'æ—¥';
                daySelect.appendChild(option);
            }

            if (currentDay <= daysInMonth) {
                daySelect.value = currentDay;
            }
        }

        // ä½¿ç”¨ lunar-javascript åº“è¿›è¡Œç²¾ç¡®çš„å†œå†è½¬é˜³å†
        function lunarToSolar(year, month, day, isLeap = false) {
            try {
                let lunar = Lunar.fromYmd(year, month, day);
                if (isLeap) {
                    const leapMonth = lunar.getLeapMonth();
                    if (leapMonth === month) {
                        lunar = Lunar.fromYmd(year, month, day);
                    }
                }
                const solar = lunar.getSolar();
                return new Date(solar.getYear(), solar.getMonth() - 1, solar.getDay());
            } catch (e) {
                console.error('å†œå†è½¬æ¢é”™è¯¯:', e);
                return null;
            }
        }

        // ä½¿ç”¨ lunar-javascript åº“è¿›è¡Œé˜³å†è½¬å†œå†
        function solarToLunar(date) {
            try {
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const solar = Solar.fromYmd(year, month, day);
                const lunar = solar.getLunar();
                return {
                    year: lunar.getYear(),
                    month: lunar.getMonth(),
                    day: lunar.getDay(),
                    isLeap: lunar.getLeapMonth() === lunar.getMonth()
                };
            } catch (e) {
                console.error('é˜³å†è½¬æ¢é”™è¯¯:', e);
                return { year: 1900, month: 1, day: 1, isLeap: false };
            }
        }

        // è·å–å†œå†å¹´çš„é—°æœˆ
        function getLeapMonth(year) {
            try {
                const lunar = Lunar.fromYmd(year, 1, 1);
                return lunar.getLeapMonth();
            } catch (e) {
                return 0;
            }
        }

        // è·å–å†œå†æŸæœˆçš„å¤©æ•°
        function getLunarDaysInMonth(year, month, isLeap = false) {
            try {
                const lunar = Lunar.fromYmd(year, month, 1);
                if (isLeap) {
                    const leapMonth = lunar.getLeapMonth();
                    if (leapMonth === month) {
                        return Lunar.fromYmd(year, month, 1).getMonthDays();
                    }
                }
                return lunar.getMonthDays();
            } catch (e) {
                return isLeap ? 29 : 30;
            }
        }

        // æ˜¾ç¤ºè½¬æ¢åçš„é˜³å†
        function showConvertedSolar() {
            const year = parseInt(document.getElementById('lunarYear').value);
            const month = parseInt(document.getElementById('lunarMonth').value);
            const day = parseInt(document.getElementById('lunarDay').value);
            const display = document.getElementById('solarDisplay');

            if (!year || !month || !day) {
                display.classList.remove('show');
                return;
            }

            const solarDate = lunarToSolar(year, month, day, false);
            if (solarDate) {
                const dateStr = solarDate.getFullYear() + 'å¹´' + (solarDate.getMonth() + 1) + 'æœˆ' + solarDate.getDate() + 'æ—¥';
                document.getElementById('convertedSolar').textContent = dateStr;
                display.classList.add('show');
            }
        }

        // åˆ‡æ¢è¾“å…¥æ¨¡å¼
        function switchMode(mode) {
            currentMode = mode;
            document.getElementById('solarBtn').classList.toggle('active', mode === 'solar');
            document.getElementById('lunarBtn').classList.toggle('active', mode === 'lunar');
            document.getElementById('solarInput').classList.toggle('active', mode === 'solar');
            document.getElementById('lunarInput').classList.toggle('active', mode === 'lunar');
        }

        // ã€Šå®¿æ›œç»ã€‹æ˜Ÿå®¿æŸ¥è¯¢è¡¨
        const SU_YAO_JING_TABLE = [
            [12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14],
            [14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16],
            [16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18],
            [18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20],
            [20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22],
            [22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],
            [25,26,27,0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],
            [0,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2],
            [2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4],
            [4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6],
            [7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10],
            [10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,9,10,11,12]
        ];

        // åŸºäºå†œå†æ—¥æœŸè·å–å€¼æ—¥æ˜Ÿå®¿
        function getStarByLunarDate(lunarYear, lunarMonth, lunarDay) {
            const monthIndex = lunarMonth - 1;
            const dayIndex = Math.min(lunarDay - 1, 29);
            if (monthIndex >= 0 && monthIndex < 12 && dayIndex >= 0 && dayIndex < 30) {
                return SU_YAO_JING_TABLE[monthIndex][dayIndex];
            }
            return 0;
        }

        // è®¡ç®—æ˜Ÿå®¿
        function calculateStar() {
            let starIndex;
            let lunarYear, lunarMonth, lunarDay;
            const t = i18n[currentLang];

            if (currentMode === 'solar') {
                const dateInput = document.getElementById('birthDate').value;
                if (!dateInput) { alert(t.alertSelectDate); return; }

                const parts = dateInput.split('-');
                const year = parseInt(parts[0]);
                const month = parseInt(parts[1]);
                const day = parseInt(parts[2]);

                const solar = Solar.fromYmd(year, month, day);
                const lunar = solar.getLunar();
                lunarYear = lunar.getYear();
                lunarMonth = lunar.getMonth();
                lunarDay = lunar.getDay();
            } else {
                lunarYear = parseInt(document.getElementById('lunarYear').value);
                lunarMonth = parseInt(document.getElementById('lunarMonth').value);
                lunarDay = parseInt(document.getElementById('lunarDay').value);
                if (!lunarYear || !lunarMonth || !lunarDay) { 
                    alert(t.alertSelectLunar); 
                    return; 
                }
            }

            starIndex = getStarByLunarDate(lunarYear, lunarMonth, lunarDay);

            document.getElementById('inputSection').style.display = 'none';
            document.getElementById('loading').classList.add('show');

            setTimeout(() => { showResult(starIndex); }, 1500);
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(index) {
            const star = starData[index];
            const t = i18n[currentLang];
            
            document.getElementById('loading').classList.remove('show');
            document.getElementById('resultSection').classList.add('show');

            document.getElementById('starIcon').textContent = star.icon;
            document.getElementById('starName').textContent = star.name;
            document.getElementById('starNameEn').textContent = star.nameEn;
            document.getElementById('starPinyin').textContent = star.pinyin;
            document.getElementById('starAnimal').textContent = currentLang === 'zh' ? star.animal : star.animalEn;
            document.getElementById('starMeaning').textContent = star.meaning[currentLang];
            document.getElementById('starPersonality').textContent = star.personality[currentLang];
            document.getElementById('fortuneCareer').textContent = star.fortune.career;
            document.getElementById('fortuneWealth').textContent = star.fortune.wealth;
            document.getElementById('fortuneLove').textContent = star.fortune.love;

            document.querySelectorAll('.star-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });

            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        // é‡æ–°æµ‹ç®—
        function resetCalc() {
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('inputSection').style.display = 'block';
            document.getElementById('birthDate').value = '';
            document.getElementById('lunarYear').value = '';
            document.getElementById('lunarMonth').value = '';
            document.getElementById('lunarDay').value = '';
            document.getElementById('solarDisplay').classList.remove('show');
            document.querySelectorAll('.star-item').forEach(item => item.classList.remove('active'));
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆ†äº«ç»“æœ
        function shareResult() {
            const star = starData.find(s => s.name === document.getElementById('starName').textContent);
            const t = i18n[currentLang];
            const starName = currentLang === 'zh' ? star.name : star.nameEn;
            const shareText = t.shareText.replace('{star}', starName);
            
            if (navigator.share) {
                navigator.share({ title: 'äºŒåå…«æ˜Ÿå®¿æµ‹ç®— | 28 Lunar Mansions', text: shareText, url: window.location.href });
            } else {
                navigator.clipboard.writeText(shareText + '\n' + window.location.href).then(() => { alert(t.copied); });
            }
        }

        window.onload = init;
    </script>
</body>
</html>