<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>âœ¨ äºŒåå…«æ˜Ÿå®¿æµ‹ç®— âœ¨</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.7.0/lunar.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', 'Noto Serif SC', serif;
            background: linear-gradient(180deg, #0a0a1a 0%, #1a1a3e 30%, #2d1b69 70%, #0f0f23 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }
        
        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        /* æµæ˜Ÿ */
        .shooting-star {
            position: absolute;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #fff, transparent);
            animation: shoot 3s linear infinite;
            opacity: 0;
        }
        
        @keyframes shoot {
            0% { transform: translateX(-100px) translateY(100px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateX(100vw) translateY(-100px); opacity: 0; }
        }
        
        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 1;
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* æ ‡é¢˜ */
        .header {
            text-align: center;
            padding: 30px 0;
        }
        
        .title {
            font-size: 2.2em;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffaa00, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px;
            letter-spacing: 8px;
        }
        
        .subtitle {
            color: #888;
            font-size: 0.9em;
            letter-spacing: 2px;
        }
        
        /* æ¨¡å¼åˆ‡æ¢ */
        .mode-switch {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            padding: 10px 25px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.3);
            color: #888;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
        }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1em;
            letter-spacing: 2px;
        }
        
        .date-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1.1em;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }
        
        .date-input:focus {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        /* å†œå†é€‰æ‹©å™¨ */
        .lunar-selectors {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .lunar-select {
            padding: 12px 8px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1em;
            text-align: center;
            outline: none;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .lunar-select:focus {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        
        .lunar-select option {
            background: #1a1a3e;
            color: #fff;
        }
        
        .leap-month-option {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 10px;
        }
        
        .leap-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #ffd700;
        }
        
        .leap-label {
            color: #aaa;
            font-size: 0.9em;
            cursor: pointer;
        }
        
        .leap-checkbox:checked + .leap-label {
            color: #ffd700;
        }
        
        /* æµ‹ç®—æŒ‰é’® */
        .calc-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 50%, #ffd700 100%);
            color: #1a1a3e;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 4px;
            margin-top: 10px;
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
        }
        
        .calc-btn:active {
            transform: translateY(0);
        }
        
        /* ç»“æœæ˜¾ç¤ºåŒº */
        .solar-display {
            text-align: center;
            padding: 10px;
            margin-top: 15px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
            font-size: 0.9em;
            color: #ffd700;
            display: none;
        }
        
        .solar-display.show {
            display: block;
        }
        
        /* ç»“æœåŒºåŸŸ */
        .result-section {
            display: none;
            animation: fadeIn 0.8s ease;
        }
        
        .result-section.show {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* æ˜Ÿå®¿å¡ç‰‡ */
        .star-card {
            background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,170,0,0.05) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            border-radius: 24px;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .star-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .star-icon {
            font-size: 4em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .star-name {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .star-pinyin {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .star-animal {
            display: inline-block;
            background: rgba(255, 215, 0, 0.2);
            padding: 8px 20px;
            border-radius: 20px;
            color: #ffd700;
            font-size: 0.9em;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .star-meaning {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            position: relative;
            z-index: 1;
        }
        
        .meaning-title {
            color: #ffd700;
            font-size: 1em;
            margin-bottom: 10px;
            border-left: 3px solid #ffd700;
            padding-left: 10px;
        }
        
        .meaning-text {
            color: #ccc;
            line-height: 1.8;
            font-size: 0.95em;
        }
        
        .star-fortune {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        
        .fortune-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px 10px;
            border-radius: 12px;
            text-align: center;
        }
        
        .fortune-label {
            color: #888;
            font-size: 0.8em;
            margin-bottom: 5px;
        }
        
        .fortune-value {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* é‡æµ‹æŒ‰é’® */
        .reset-btn {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 12px;
            background: transparent;
            color: #ffd700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .reset-btn:hover {
            background: rgba(255, 215, 0, 0.1);
        }
        
        /* åˆ†äº«æŒ‰é’® */
        .share-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* åº•éƒ¨ */
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
            font-size: 0.8em;
            margin-top: auto;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* äºŒåå…«æ˜Ÿå®¿åˆ—è¡¨ */
        .star-list {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }
        
        .star-item {
            text-align: center;
            padding: 8px 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            font-size: 0.75em;
            color: #888;
        }
        
        .star-item.active {
            background: rgba(255, 215, 0, 0.3);
            color: #ffd700;
            font-weight: bold;
        }
        
        /* è¾“å…¥æ¨¡å¼å®¹å™¨ */
        .input-mode {
            display: none;
        }
        
        .input-mode.active {
            display: block;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 400px) {
            .title { font-size: 1.8em; letter-spacing: 4px; }
            .star-name { font-size: 2em; }
            .star-icon { font-size: 3em; }
            .star-list { grid-template-columns: repeat(4, 1fr); }
            .lunar-selectors { grid-template-columns: repeat(3, 1fr); }
            .lunar-select { font-size: 0.9em; padding: 10px 5px; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <header class="header">
            <h1 class="title">äºŒåå…«æ˜Ÿå®¿</h1>
            <p class="subtitle">æ¢ç´¢ä½ çš„å¤©å‘½æ˜Ÿå®¿</p>
        </header>
        
        <section class="input-section" id="inputSection">
            <!-- æ¨¡å¼åˆ‡æ¢ -->
            <div class="mode-switch">
                <button class="mode-btn active" id="solarBtn" onclick="switchMode('solar')">â˜€ï¸ é˜³å†</button>
                <button class="mode-btn" id="lunarBtn" onclick="switchMode('lunar')">ğŸŒ™ å†œå†</button>
            </div>
            
            <!-- é˜³å†è¾“å…¥ -->
            <div class="input-mode active" id="solarInput">
                <div class="input-group">
                    <label class="input-label">âœ¨ é€‰æ‹©ä½ çš„é˜³å†ç”Ÿæ—¥</label>
                    <input type="date" class="date-input" id="birthDate" max="">
                </div>
            </div>
            
            <!-- å†œå†è¾“å…¥ -->
            <div class="input-mode" id="lunarInput">
                <div class="input-group">
                    <label class="input-label">ğŸŒ™ é€‰æ‹©ä½ çš„å†œå†ç”Ÿæ—¥</label>
                    <div class="lunar-selectors">
                        <select class="lunar-select" id="lunarYear">
                            <option value="">å¹´ä»½</option>
                        </select>
                        <select class="lunar-select" id="lunarMonth">
                            <option value="">æœˆä»½</option>
                        </select>
                        <select class="lunar-select" id="lunarDay">
                            <option value="">æ—¥æœŸ</option>
                        </select>
                    </div>
                </div>
                <div class="solar-display" id="solarDisplay">
                    å¯¹åº”é˜³å†ï¼š<span id="convertedSolar">--</span>
                </div>
            </div>
            
            <button class="calc-btn" onclick="calculateStar()">ğŸ”® æµ‹ç®—æ˜Ÿå®¿</button>
            
            <!-- äºŒåå…«å®¿åˆ—è¡¨ -->
            <div class="star-list" id="starList">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>
        
        <section class="loading" id="loading">
            <div class="spinner"></div>
            <p>æ­£åœ¨æ¨ç®—æ˜Ÿå®¿...</p>
        </section>
        
        <section class="result-section" id="resultSection">
            <div class="star-card">
                <div class="star-icon" id="starIcon">â­</div>
                <div class="star-name" id="starName">--</div>
                <div class="star-pinyin" id="starPinyin">--</div>
                <div class="star-animal" id="starAnimal">--</div>
                
                <div class="star-meaning">
                    <div class="meaning-title">æ˜Ÿå®¿å¯“æ„</div>
                    <div class="meaning-text" id="starMeaning">--</div>
                </div>
                
                <div class="star-meaning">
                    <div class="meaning-title">æ€§æ ¼ç‰¹å¾</div>
                    <div class="meaning-text" id="starPersonality">--</div>
                </div>
                
                <div class="star-fortune">
                    <div class="fortune-item">
                        <div class="fortune-label">äº‹ä¸š</div>
                        <div class="fortune-value" id="fortuneCareer">â­â­â­â­</div>
                    </div>
                    <div class="fortune-item">
                        <div class="fortune-label">è´¢è¿</div>
                        <div class="fortune-value" id="fortuneWealth">â­â­â­</div>
                    </div>
                    <div class="fortune-item">
                        <div class="fortune-label">å§»ç¼˜</div>
                        <div class="fortune-value" id="fortuneLove">â­â­â­â­â­</div>
                    </div>
                </div>
            </div>
            
            <button class="share-btn" onclick="shareResult()">ğŸ“¤ åˆ†äº«ç»“æœ</button>
            <button class="reset-btn" onclick="resetCalc()">ğŸ”„ é‡æ–°æµ‹ç®—</button>
        </section>
        
        <footer class="footer">
            <p>äºŒåå…«æ˜Ÿå®¿ Â· ä¾æ®ã€Šå®¿æ›œç»ã€‹</p>
            <p style="margin-top: 10px; opacity: 0.6;">ã€Šæ–‡æ®Šå¸ˆåˆ©è©è¨åŠè¯¸ä»™æ‰€è¯´å‰å‡¶æ—¶æ—¥å–„æ¶å®¿æ›œç»ã€‹</p>
        </footer>
    </div>

    <script>
        // å½“å‰è¾“å…¥æ¨¡å¼
        let currentMode = 'solar';
        
        // äºŒåå…«æ˜Ÿå®¿æ•°æ® - ã€Šå®¿æ›œç»ã€‹é¡ºåº
        // ã€Šæ–‡æ®Šå¸ˆåˆ©è©è¨åŠè¯¸ä»™æ‰€è¯´å‰å‡¶æ—¶æ—¥å–„æ¶å®¿æ›œç»ã€‹ä¸“ç”¨é¡ºåº
        const starData = [
            {
                name: 'æˆ¿æ—¥å…”',
                pinyin: 'FÃ¡ng RÃ¬ TÃ¹',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬å››å®¿',
                icon: 'ğŸ°',
                meaning: 'æˆ¿å®¿ä¸ºé¾™è…¹ï¼Œè±¡å¾ä¸°é¥¶å’Œç¾å¥½ã€‚ä¸»å‰ç¥¥ã€å¹¸ç¦ï¼Œä»£è¡¨æ¸©æŸ”å’Œå–„è‰¯ã€‚',
                personality: 'ä½ æ€§æ ¼æ¸©å’Œï¼Œå¿ƒåœ°å–„è‰¯ï¼Œæœ‰åŒæƒ…å¿ƒã€‚å–„äºä¸äººç›¸å¤„ï¼Œäººç¼˜å¥½ã€‚è¿½æ±‚ç¾å¥½äº‹ç‰©ï¼Œæœ‰è‰ºæœ¯å¤©èµ‹ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å¿ƒæœˆç‹',
                pinyin: 'XÄ«n YuÃ¨ HÃº',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬äº”å®¿',
                icon: 'ğŸ¦Š',
                meaning: 'å¿ƒå®¿ä¸ºé¾™å¿ƒï¼Œè±¡å¾æ™ºæ…§å’Œçµæ€§ã€‚ä¸»èªæ…§ã€æœºæ•ï¼Œæœ‰æ´å¯Ÿäººå¿ƒä¹‹èƒ½ã€‚',
                personality: 'ä½ èªæ˜æœºæ™ºï¼Œååº”æ•æ·ï¼Œå–„äºå¯Ÿè¨€è§‚è‰²ã€‚æœ‰é­…åŠ›ï¼Œå¼‚æ€§ç¼˜å¥½ã€‚ä½†æœ‰æ—¶ä¼šæƒ…ç»ªåŒ–ï¼Œéœ€è¦å­¦ä¼šæ§åˆ¶æƒ…æ„Ÿã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å°¾ç«è™',
                pinyin: 'WÄ›i HuÇ’ HÇ”',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬å…­å®¿',
                icon: 'ğŸ…',
                meaning: 'å°¾å®¿ä¸ºé¾™å°¾ï¼Œè±¡å¾åŠ›é‡å’Œå¨ä¸¥ã€‚ä¸»å‹‡çŒ›ã€æœæ–­ï¼Œæœ‰å†²é”‹é™·é˜µä¹‹å‹‡ã€‚',
                personality: 'ä½ æ€§æ ¼è±ªçˆ½ï¼Œæœ‰å†’é™©ç²¾ç¥ï¼Œæ•¢äºæ‹¼æã€‚ä¸ºäººä»—ä¹‰ï¼Œè·¯è§ä¸å¹³ä¼šæ‹”åˆ€ç›¸åŠ©ã€‚è„¾æ°”ç›´ç‡ï¼Œè¯´è¯ç›´æ¥ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'ç®•æ°´è±¹',
                pinyin: 'JÄ« ShuÇ BÃ o',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸ƒå®¿',
                icon: 'ğŸ†',
                meaning: 'ç®•å®¿ä¸ºé¾™å°¾æ‰€åŒ–ä¹‹é£ï¼Œè±¡å¾çµåŠ¨å’Œå˜åŒ–ã€‚ä¸»æ™ºæ…§ã€å˜é€šï¼Œæœ‰åŒ–é™©ä¸ºå¤·ä¹‹èƒ½ã€‚',
                personality: 'ä½ æœºæ™ºçµæ´»ï¼Œå–„äºéšæœºåº”å˜ã€‚é€‚åº”èƒ½åŠ›å¼ºï¼Œèƒ½åœ¨å›°å¢ƒä¸­æ‰¾åˆ°å‡ºè·¯ã€‚å¤šæ‰å¤šè‰ºï¼Œå…´è¶£å¹¿æ³›ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'æ–—æœ¨ç¬',
                pinyin: 'DÇ’u MÃ¹ XiÃ¨',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸€å®¿',
                icon: 'ğŸ¦Œ',
                meaning: 'æ–—å®¿ä¸ºåŒ—æ–—ä¹‹å½¢ï¼Œè±¡å¾æƒå¨å’ŒæŒ‡å¼•ã€‚ä¸»æ™ºæ…§ã€é¢†å¯¼åŠ›ï¼Œæœ‰æ˜è¾¨æ˜¯éä¹‹èƒ½ã€‚',
                personality: 'ä½ æœ‰é¢†å¯¼æ‰èƒ½ï¼Œå–„äºç»„ç»‡åè°ƒã€‚ä¸ºäººæ­£ç›´ï¼Œæœ‰åŸåˆ™æ€§ã€‚è¿½æ±‚å…¬å¹³æ­£ä¹‰ï¼Œé€‚åˆåšç®¡ç†è€…ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'ç‰›é‡‘ç‰›',
                pinyin: 'NiÃº JÄ«n NiÃº',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬äºŒå®¿',
                icon: 'ğŸ‚',
                meaning: 'ç‰›å®¿è±¡å¾å‹¤åŠ³å’Œè¸å®ã€‚ä¸»å‹¤å¥‹ã€åšéŸ§ï¼Œæœ‰åƒè‹¦è€åŠ³ä¹‹å¾·ã€‚',
                personality: 'ä½ å‹¤åŠ³è¸å®ï¼Œåšäº‹è®¤çœŸè´Ÿè´£ã€‚æœ‰è€å¿ƒå’Œæ¯…åŠ›ï¼Œèƒ½åšæŒç›®æ ‡ã€‚ä¸ºäººè¯šæ³ï¼Œé‡ä¿¡å®ˆè¯ºã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'å¥³åœŸè ',
                pinyin: 'NÇš TÇ” FÃº',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦‡',
                meaning: 'å¥³å®¿è±¡å¾æ™ºæ…§å’Œçµå·§ã€‚ä¸»æœºæ•ã€èªæ…§ï¼Œæœ‰å·§æ€å¦™æƒ³ä¹‹èƒ½ã€‚',
                personality: 'ä½ å¿ƒæ€ç»†è…»ï¼Œè§‚å¯ŸåŠ›æ•é”ã€‚æ“…é•¿ç»†èŠ‚å·¥ä½œï¼Œæœ‰æ‰‹å·¥è‰ºå¤©èµ‹ã€‚ä¸ºäººæ¸©æŸ”ï¼Œå–„è§£äººæ„ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'è™šæ—¥é¼ ',
                pinyin: 'XÅ« RÃ¬ ShÇ”',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬å››å®¿',
                icon: 'ğŸ­',
                meaning: 'è™šå®¿è±¡å¾è™šç©ºå’Œå˜åŒ–ã€‚ä¸»æœºå˜ã€çµæ´»ï¼Œæœ‰è¶‹å‰é¿å‡¶ä¹‹æ™ºã€‚',
                personality: 'ä½ èªæ˜çµæ´»ï¼Œå–„äºæŠŠæ¡æœºä¼šã€‚é€‚åº”åŠ›å¼ºï¼Œèƒ½åœ¨å˜åŒ–ä¸­æ±‚ç”Ÿå­˜ã€‚ä¸ºäººè°¨æ…ï¼Œåšäº‹æœ‰æ¡ç†ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'å±æœˆç‡•',
                pinyin: 'WÄ“i YuÃ¨ YÃ n',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬äº”å®¿',
                icon: 'ğŸ¦',
                meaning: 'å±å®¿è±¡å¾å±æœºå’Œè½¬æœºã€‚ä¸»åŒ–é™©ä¸ºå¤·ï¼Œæœ‰é€¢å‡¶åŒ–å‰ä¹‹èƒ½ã€‚',
                personality: 'ä½ æ€§æ ¼ç‹¬ç«‹ï¼Œæœ‰å†’é™©ç²¾ç¥ã€‚èƒ½åœ¨å±æœºä¸­ä¿æŒå†·é™ï¼Œæ‰¾åˆ°å‡ºè·¯ã€‚ä¸ºäººæœºè­¦ï¼Œå–„äºè‡ªæˆ‘ä¿æŠ¤ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'å®¤ç«çŒª',
                pinyin: 'ShÃ¬ HuÇ’ ZhÅ«',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬å…­å®¿',
                icon: 'ğŸ·',
                meaning: 'å®¤å®¿è±¡å¾æˆ¿å±‹å’Œå®‰å®šã€‚ä¸»å®‰å®šã€å®ˆæŠ¤ï¼Œæœ‰å®¶å®…å¹³å®‰ä¹‹ç¦ã€‚',
                personality: 'ä½ é‡è§†å®¶åº­ï¼Œæœ‰å®ˆæŠ¤å®¶äººçš„è´£ä»»æ„Ÿã€‚åšäº‹ç¨³é‡ï¼Œè¿½æ±‚å®‰å®šã€‚ä¸ºäººå®½åšï¼Œæœ‰åŒ…å®¹å¿ƒã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å£æ°´è²',
                pinyin: 'BÃ¬ ShuÇ YÇ”',
                animal: 'åŒ—æ–¹ç„æ­¦ç¬¬ä¸ƒå®¿',
                icon: 'ğŸº',
                meaning: 'å£å®¿è±¡å¾å±éšœå’Œä¿æŠ¤ã€‚ä¸»é˜²å¾¡ã€å®ˆæŠ¤ï¼Œæœ‰é¿é‚ªæŠ¤èº«ä¹‹èƒ½ã€‚',
                personality: 'ä½ æ€§æ ¼è°¨æ…ï¼Œå–„äºé˜²èŒƒé£é™©ã€‚æœ‰ä¿æŠ¤æ¬²ï¼Œä¼šç…§é¡¾èº«è¾¹äººã€‚åšäº‹ç»†è‡´ï¼Œè¿½æ±‚å®Œç¾ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'å¥æœ¨ç‹¼',
                pinyin: 'KuÃ­ MÃ¹ LÃ¡ng',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸€å®¿',
                icon: 'ğŸº',
                meaning: 'å¥å®¿è±¡å¾æ–‡é‡‡å’Œæ™ºæ…§ã€‚ä¸»æ–‡è¿ã€æ‰åï¼Œæœ‰æ–‡ç« ç›–ä¸–ä¹‹æ‰ã€‚',
                personality: 'ä½ æœ‰æ–‡è‰ºå¤©èµ‹ï¼Œå–„äºè¡¨è¾¾ã€‚å–œæ¬¢å­¦ä¹ ï¼ŒçŸ¥è¯†é¢å¹¿ã€‚ä¸ºäººæ¸©å’Œï¼Œæœ‰ä¹¦å·æ°”ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'å¨„é‡‘ç‹—',
                pinyin: 'LÃ³u JÄ«n GÇ’u',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬äºŒå®¿',
                icon: 'ğŸ•',
                meaning: 'å¨„å®¿è±¡å¾å¿ è¯šå’Œå®ˆä¿¡ã€‚ä¸»è¯šä¿¡ã€å¿ å®ï¼Œæœ‰å®ˆæŠ¤ä¹‹å¾·ã€‚',
                personality: 'ä½ å¿ è¯šå¯é ï¼Œé‡æƒ…ä¹‰ã€‚å¯¹æœ‹å‹çœŸè¯šï¼Œä¼šä¼¸å‡ºæ´æ‰‹ã€‚åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œå€¼å¾—ä¿¡èµ–ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'èƒƒåœŸé›‰',
                pinyin: 'WÃ¨i TÇ” ZhÃ¬',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦š',
                meaning: 'èƒƒå®¿è±¡å¾å¯Œè¶³å’Œæ”¶è—ã€‚ä¸»è´¢è¿ã€ç§¯è“„ï¼Œæœ‰è¡£é£Ÿæ— å¿§ä¹‹ç¦ã€‚',
                personality: 'ä½ æœ‰ç†è´¢å¤´è„‘ï¼Œå–„äºç§¯ç´¯è´¢å¯Œã€‚åšäº‹åŠ¡å®ï¼Œä¸æµ®å¤¸ã€‚ä¸ºäººå¤§æ–¹ï¼Œä¹äºåŠ©äººã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'æ˜´æ—¥é¸¡',
                pinyin: 'MÇo RÃ¬ JÄ«',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬å››å®¿',
                icon: 'ğŸ“',
                meaning: 'æ˜´å®¿è±¡å¾å…‰æ˜å’Œå¸Œæœ›ã€‚ä¸»å…‰æ˜ç£Šè½ï¼Œæœ‰å‰ç¨‹ä¼¼é”¦ä¹‹è±¡ã€‚',
                personality: 'ä½ æ€§æ ¼å…‰æ˜æ­£å¤§ï¼Œä¸æ‹˜å°èŠ‚ã€‚æœ‰è¿›å–å¿ƒï¼Œè¿½æ±‚å“è¶Šã€‚ä¸ºäººçƒ­å¿ƒï¼Œå–œæ¬¢å¸®åŠ©ä»–äººã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'æ¯•æœˆä¹Œ',
                pinyin: 'BÃ¬ YuÃ¨ WÅ«',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬äº”å®¿',
                icon: 'ğŸ¦â€â¬›',
                meaning: 'æ¯•å®¿è±¡å¾å®Œæˆå’Œåœ†æ»¡ã€‚ä¸»åœ†æ»¡ã€æˆå°±ï¼Œæœ‰æˆåŠŸä¹‹è±¡ã€‚',
                personality: 'ä½ åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œè¿½æ±‚å®Œç¾ã€‚æœ‰æ¯…åŠ›èƒ½åšæŒï¼Œä¸è¾¾ç›®çš„ä¸ç½¢ä¼‘ã€‚ä¸ºäººè®¤çœŸï¼Œä¸€ä¸ä¸è‹Ÿã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'è§œç«çŒ´',
                pinyin: 'ZÄ« HuÇ’ HÃ³u',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬å…­å®¿',
                icon: 'ğŸ’',
                meaning: 'è§œå®¿è±¡å¾æœºæ•å’Œçµå·§ã€‚ä¸»æœºæ™ºã€çµæ´»ï¼Œæœ‰éšæœºåº”å˜ä¹‹èƒ½ã€‚',
                personality: 'ä½ èªæ˜æœºçµï¼Œååº”å¿«ã€‚å–„äºäº¤é™…ï¼Œäººç¼˜å¥½ã€‚å¤šæ‰å¤šè‰ºï¼Œå…´è¶£å¹¿æ³›ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'å‚æ°´çŒ¿',
                pinyin: 'ShÄ“n ShuÇ YuÃ¡n',
                animal: 'è¥¿æ–¹ç™½è™ç¬¬ä¸ƒå®¿',
                icon: 'ğŸ¦§',
                meaning: 'å‚å®¿è±¡å¾æˆç†Ÿå’Œä¸°æ”¶ã€‚ä¸»æˆå°±ã€æ”¶è·ï¼Œæœ‰å¤§å™¨æ™šæˆä¹‹è±¡ã€‚',
                personality: 'ä½ æˆç†Ÿç¨³é‡ï¼Œæœ‰è¿œè§ã€‚åšäº‹æœ‰è®¡åˆ’ï¼Œæ­¥æ­¥ä¸ºè¥ã€‚ä¸ºäººè°¦è™šï¼Œä¸å¼ æ‰¬ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'äº•æœ¨çŠ´',
                pinyin: 'JÇng MÃ¹ Ã€n',
                animal: 'å—æ–¹æœ±é›€ç¬¬ä¸€å®¿',
                icon: 'ğŸ¦',
                meaning: 'äº•å®¿è±¡å¾æ°´æºå’Œæ»‹å…»ã€‚ä¸»æ¶¦æ³½ã€å…»è‚²ï¼Œæœ‰æºæºä¸æ–­ä¹‹ç¦ã€‚',
                personality: 'ä½ æœ‰åŒ…å®¹å¿ƒï¼Œå–„äºç…§é¡¾ä»–äººã€‚æœ‰åˆ›é€ åŠ›ï¼Œæ€ç»´æ´»è·ƒã€‚ä¸ºäººæ…·æ…¨ï¼Œä¹äºåˆ†äº«ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'é¬¼é‡‘ç¾Š',
                pinyin: 'GuÇ JÄ«n YÃ¡ng',
                animal: 'å—æ–¹æœ±é›€ç¬¬äºŒå®¿',
                icon: 'ğŸ‘',
                meaning: 'é¬¼å®¿è±¡å¾ç¥ç§˜å’Œç›´è§‰ã€‚ä¸»çµæ€§ã€ç›´è§‰ï¼Œæœ‰è¶…å‡¡æ„ŸçŸ¥ä¹‹èƒ½ã€‚',
                personality: 'ä½ ç›´è§‰æ•é”ï¼Œæœ‰ç¬¬å…­æ„Ÿã€‚å–„äºè§‚å¯Ÿï¼Œèƒ½çœ‹é€äººå¿ƒã€‚ä¸ºäººç¥ç§˜ï¼Œæœ‰ç‹¬ç‰¹é­…åŠ›ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'æŸ³åœŸç',
                pinyin: 'LiÇ” TÇ” ZhÄng',
                animal: 'å—æ–¹æœ±é›€ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦Œ',
                meaning: 'æŸ³å®¿è±¡å¾æŸ”éŸ§å’Œé€‚åº”ã€‚ä¸»é€‚åº”ã€å˜é€šï¼Œæœ‰ç™¾æŠ˜ä¸æŒ ä¹‹å¾·ã€‚',
                personality: 'ä½ æ€§æ ¼æ¸©å’Œï¼Œå–„äºé€‚åº”ç¯å¢ƒã€‚æœ‰éŸ§æ€§ï¼Œé‡åˆ°å›°éš¾ä¸é€€ç¼©ã€‚ä¸ºäººéšå’Œï¼Œå®¹æ˜“ç›¸å¤„ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'æ˜Ÿæ—¥é©¬',
                pinyin: 'XÄ«ng RÃ¬ MÇ',
                animal: 'å—æ–¹æœ±é›€ç¬¬å››å®¿',
                icon: 'ğŸ´',
                meaning: 'æ˜Ÿå®¿è±¡å¾å…‰æ˜å’Œå¸Œæœ›ã€‚ä¸»å‰ç¨‹ã€å‘å±•ï¼Œæœ‰å‰é€”æ— é‡ä¹‹è±¡ã€‚',
                personality: 'ä½ å……æ»¡æ´»åŠ›ï¼Œæœ‰è¿›å–å¿ƒã€‚å–œæ¬¢è‡ªç”±ï¼Œä¸å–œæ¬¢æŸç¼šã€‚ä¸ºäººä¹è§‚ï¼Œå……æ»¡æ­£èƒ½é‡ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'å¼ æœˆé¹¿',
                pinyin: 'ZhÄng YuÃ¨ LÃ¹',
                animal: 'å—æ–¹æœ±é›€ç¬¬äº”å®¿',
                icon: 'ğŸ¦Œ',
                meaning: 'å¼ å®¿è±¡å¾å±•å¼€å’Œå‘å±•ã€‚ä¸»æ‰©å¼ ã€å‘å±•ï¼Œæœ‰è’¸è’¸æ—¥ä¸Šä¹‹åŠ¿ã€‚',
                personality: 'ä½ æœ‰å¼€æ‹“ç²¾ç¥ï¼Œå–„äºæ‰©å±•äº‹ä¸šã€‚æœ‰é¢†å¯¼æ‰èƒ½ï¼Œèƒ½å¸¦é¢†å›¢é˜Ÿã€‚ä¸ºäººå¤§æ°”ï¼Œæœ‰æ ¼å±€ã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'ç¿¼ç«è›‡',
                pinyin: 'YÃ¬ HuÇ’ ShÃ©',
                animal: 'å—æ–¹æœ±é›€ç¬¬å…­å®¿',
                icon: 'ğŸ',
                meaning: 'ç¿¼å®¿è±¡å¾é£ç¿”å’Œè‡ªç”±ã€‚ä¸»è‡ªç”±ã€å˜åŒ–ï¼Œæœ‰æ— æ‹˜æ— æŸä¹‹æ€ã€‚',
                personality: 'ä½ çƒ­çˆ±è‡ªç”±ï¼Œä¸å–œæ¬¢è¢«æŸç¼šã€‚æ€ç»´æ´»è·ƒï¼Œåˆ›æ„å¤šã€‚ä¸ºäººç‹¬ç«‹ï¼Œæœ‰è‡ªå·±çš„æƒ³æ³•ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­â­' }
            },
            {
                name: 'è½¸æ°´èš“',
                pinyin: 'ZhÄ›n ShuÇ YÇn',
                animal: 'å—æ–¹æœ±é›€ç¬¬ä¸ƒå®¿',
                icon: 'ğŸ›',
                meaning: 'è½¸å®¿è±¡å¾å½’å®¿å’Œåœ†æ»¡ã€‚ä¸»åœ†æ»¡ã€æˆå°±ï¼Œæœ‰å–„å§‹å–„ç»ˆä¹‹å¾·ã€‚',
                personality: 'ä½ åšäº‹æœ‰å§‹æœ‰ç»ˆï¼Œè¿½æ±‚å®Œç¾ç»“å±€ã€‚æœ‰è´£ä»»æ„Ÿï¼Œä¼šåšæŒåˆ°åº•ã€‚ä¸ºäººè¸å®ï¼Œå€¼å¾—ä¿¡èµ–ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'è§’æœ¨è›Ÿ',
                pinyin: 'JiÇo MÃ¹ JiÄo',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸€å®¿',
                icon: 'ğŸ‰',
                meaning: 'è§’å®¿ä¸ºä¸œæ–¹è‹é¾™ä¹‹é¦–ï¼Œè±¡å¾æ–°çš„å¼€å§‹å’Œè¿›å–ç²¾ç¥ã€‚è§’å®¿ä¸»æ˜¥ç”Ÿä¹‹æ°”ï¼Œä»£è¡¨ä¸‡ç‰©å¤è‹ã€ç”Ÿæœºå‹ƒå‹ƒã€‚',
                personality: 'ä½ å…·æœ‰å¼€æ‹“ç²¾ç¥ï¼Œå‹‡äºåˆ›æ–°ï¼Œå–œæ¬¢æŒ‘æˆ˜æ–°äº‹ç‰©ã€‚æ€§æ ¼ç›´ç‡ï¼Œæœ‰é¢†å¯¼æ‰èƒ½ï¼Œå–„äºå¼€åˆ›å±€é¢ã€‚ä¸ºäººæ­£ç›´ï¼Œæœ‰æ­£ä¹‰æ„Ÿã€‚',
                fortune: { career: 'â­â­â­â­â­', wealth: 'â­â­â­', love: 'â­â­â­â­' }
            },
            {
                name: 'äº¢é‡‘é¾™',
                pinyin: 'KÃ ng JÄ«n LÃ³ng',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬äºŒå®¿',
                icon: 'ğŸ²',
                meaning: 'äº¢å®¿è±¡å¾é¾™çš„å’½å–‰ï¼Œä¸»å¨ä¸¥å’ŒæƒåŠ¿ã€‚ä»£è¡¨åˆšå¼ºã€åšæ¯…çš„å“è´¨ï¼Œæœ‰æŠ¤ä½‘ä¹‹åŠ›ã€‚',
                personality: 'ä½ æ€§æ ¼åˆšå¼ºï¼Œæ„å¿—åšå®šï¼Œä¸è½»æ˜“æ”¾å¼ƒã€‚æœ‰è´£ä»»æ„Ÿï¼Œé‡æƒ…ä¹‰ï¼Œå¯¹æœ‹å‹å¿ è¯šã€‚åšäº‹æœ‰é­„åŠ›ï¼Œä½†æœ‰æ—¶ä¼šè¿‡äºå›ºæ‰§ã€‚',
                fortune: { career: 'â­â­â­â­', wealth: 'â­â­â­â­', love: 'â­â­â­' }
            },
            {
                name: 'æ°åœŸè²‰',
                pinyin: 'DÄ« TÇ” HÃ©',
                animal: 'ä¸œæ–¹è‹é¾™ç¬¬ä¸‰å®¿',
                icon: 'ğŸ¦¡',
                meaning: 'æ°å®¿ä¸ºé¾™èƒ¸ï¼Œè±¡å¾æ ¹åŸºå’Œç¨³é‡ã€‚ä¸»å®‰å®šã€è¸å®ï¼Œæœ‰å®ˆæˆä¹‹èƒ½ã€‚',
                personality: 'ä½ æ€§æ ¼ç¨³é‡è¸å®ï¼Œåšäº‹æœ‰æ¡ç†ã€‚é‡è§†å®¶åº­ï¼Œæœ‰ç†è´¢å¤´è„‘ã€‚ä¸ºäººè¯šå®å¯é ï¼Œæ˜¯å€¼å¾—ä¿¡èµ–çš„æœ‹å‹ã€‚',
                fortune: { career: 'â­â­â­', wealth: 'â­â­â­â­â­', love: 'â­â­â­â­' }
            }
        ];
        
        // 1900-2100å¹´å†œå†æ•°æ®ï¼ˆç²¾ç¡®æ•°æ®ï¼‰
        // æ ¼å¼ï¼š{months: [1-12æœˆå¤©æ•°], leapMonth: é—°æœˆæœˆä»½(0=æ— ), leapDays: é—°æœˆå¤©æ•°}
        // æ•°æ®æ¥æºï¼šé¦™æ¸¯å¤©æ–‡å°åŠç´«é‡‘å±±å¤©æ–‡å°å†œå†æ•°æ®
        const LUNAR_INFO = {
            // 1900-1950
            1900: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1901: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1902: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1903: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1904: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1905: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1906: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1907: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1908: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1909: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1910: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1911: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1912: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1913: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1914: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1915: {months: [29,30,29,30,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1916: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1917: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1918: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1919: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1920: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1921: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1922: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1923: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1924: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1925: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1926: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1927: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1928: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1929: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1930: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1931: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1932: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1933: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1934: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1935: {months: [29,30,29,30,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1936: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1937: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1938: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1939: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1940: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1941: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1942: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1943: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1944: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1945: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1946: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1947: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1948: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1949: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1950: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            // 1951-2000
            1951: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1952: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1953: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1954: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1955: {months: [29,30,29,30,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1956: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1957: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1958: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1959: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1960: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1961: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1962: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1963: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1964: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1965: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1966: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1967: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1968: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1969: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1970: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1971: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1972: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1973: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1974: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1975: {months: [29,30,29,30,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1976: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            // å…³é”®å¹´ä»½ï¼š1977å¹´é—°å…­æœˆ
            1977: {months: [29,30,29,29,30,29,30,29,30,30,29,30], leapMonth: 6, leapDays: 29},
            1978: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1979: {months: [30,29,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1980: {months: [29,30,29,30,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1981: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1982: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1983: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1984: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1985: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1986: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1987: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            // å…³é”®å¹´ä»½ï¼š1988å¹´é—°å…­æœˆ
            1988: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 6, leapDays: 29},
            1989: {months: [30,29,30,29,30,29,30,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1990: {months: [29,30,29,30,29,30,29,30,29,30,30,29], leapMonth: 0, leapDays: 0},
            1991: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1992: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1993: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1994: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            1995: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            1996: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1997: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            1998: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            1999: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2000: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            // 2001-2030
            2001: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            2002: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            2003: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2004: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            2005: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            2006: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2007: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2008: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            2009: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2010: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            2011: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            2012: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2013: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2014: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            2015: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2016: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            2017: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            2018: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2019: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2020: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            2021: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2022: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            2023: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            2024: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2025: {months: [30,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2026: {months: [29,30,30,29,30,29,30,29,30,29,30,29], leapMonth: 0, leapDays: 0},
            2027: {months: [30,29,30,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
            2028: {months: [29,30,29,30,29,30,29,30,30,29,30,29], leapMonth: 0, leapDays: 0},
            2029: {months: [30,29,30,29,30,29,30,29,30,29,30,30], leapMonth: 0, leapDays: 0},
            2030: {months: [29,30,29,30,29,30,29,30,29,30,29,30], leapMonth: 0, leapDays: 0},
        };
        
        // å¤©å¹²åœ°æ”¯ï¼ˆå¤‡ç”¨ï¼‰
        const TIAN_GAN = ['ç”²','ä¹™','ä¸™','ä¸','æˆŠ','å·±','åºš','è¾›','å£¬','ç™¸'];
        const DI_ZHI = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];
        
        // åˆå§‹åŒ–
        function init() {
            createStars();
            createStarList();
            initLunarSelectors();
            
            // è®¾ç½®æ—¥æœŸè¾“å…¥æœ€å¤§å€¼ä¸ºä»Šå¤©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('birthDate').max = today;
        }
        
        // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            
            // æ™®é€šæ˜Ÿæ˜Ÿ
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.opacity = Math.random() * 0.8 + 0.2;
                starsContainer.appendChild(star);
            }
            
            // æµæ˜Ÿ
            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.top = Math.random() * 50 + '%';
                shootingStar.style.animationDelay = i * 5 + 's';
                starsContainer.appendChild(shootingStar);
            }
        }
        
        // åˆ›å»ºæ˜Ÿå®¿åˆ—è¡¨
        function createStarList() {
            const list = document.getElementById('starList');
            starData.forEach((star, index) => {
                const item = document.createElement('div');
                item.className = 'star-item';
                item.textContent = star.name.substring(0, 2);
                item.id = 'star-' + index;
                list.appendChild(item);
            });
        }
        
        // åˆå§‹åŒ–å†œå†é€‰æ‹©å™¨
        function initLunarSelectors() {
            const yearSelect = document.getElementById('lunarYear');
            const monthSelect = document.getElementById('lunarMonth');
            const daySelect = document.getElementById('lunarDay');
            
            // å¹´ä»½é€‰é¡¹ (1900-2030)
            for (let year = 1900; year <= 2030; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'å¹´ (' + getGanZhi(year) + ')';
                yearSelect.appendChild(option);
            }
            
            // æœˆä»½é€‰é¡¹
            for (let month = 1; month <= 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = month + 'æœˆ';
                monthSelect.appendChild(option);
            }
            
            // æ—¥æœŸé€‰é¡¹ (1-30)
            updateLunarDays();
            
            // ç›‘å¬å˜åŒ–æ›´æ–°æ—¥æœŸé€‰é¡¹
            yearSelect.addEventListener('change', updateLunarDays);
            monthSelect.addEventListener('change', updateLunarDays);
            
            // ç›‘å¬å˜åŒ–æ˜¾ç¤ºå¯¹åº”é˜³å†
            yearSelect.addEventListener('change', showConvertedSolar);
            monthSelect.addEventListener('change', showConvertedSolar);
            daySelect.addEventListener('change', showConvertedSolar);
        }
        
        // æ›´æ–°å†œå†æ—¥æœŸé€‰é¡¹
        function updateLunarDays() {
            const year = parseInt(document.getElementById('lunarYear').value);
            const month = parseInt(document.getElementById('lunarMonth').value);
            const daySelect = document.getElementById('lunarDay');
            
            if (!year || !month) {
                return;
            }
            
            // è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ä¸ºé—°æœˆï¼šå¦‚æœè¯¥å¹´ä»½æœ‰é—°æœˆä¸”ç”¨æˆ·é€‰æ‹©äº†è¯¥æœˆä»½
            const leapMonth = getLeapMonth(year);
            const isLeap = (leapMonth === month);
            
            const daysInMonth = getLunarDaysInMonth(year, month, isLeap);
            const currentDay = parseInt(daySelect.value) || 1;
            
            daySelect.innerHTML = '<option value="">æ—¥æœŸ</option>';
            for (let day = 1; day <= daysInMonth; day++) {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = day + 'æ—¥';
                daySelect.appendChild(option);
            }
            
            if (currentDay <= daysInMonth) {
                daySelect.value = currentDay;
            }
        }
        
        // ä½¿ç”¨Lunaråº“è¿›è¡Œå†œå†è½¬æ¢
        
        // è·å–å†œå†æŸæœˆçš„å¤©æ•°
        function getLunarDaysInMonth(year, month, isLeap) {
            try {
                const lunar = Lunar.fromYmd(year, month, 1);
                if (isLeap) {
                    // æ£€æŸ¥æ˜¯å¦é—°æœˆ
                    const leapMonth = lunar.getLeapMonth();
                    if (leapMonth === month) {
                        // è·å–é—°æœˆå¤©æ•°
                        return Lunar.fromYmd(year, month, 1).getMonthDays();
                    }
                }
                return lunar.getMonthDays();
            } catch (e) {
                // å¤‡ç”¨ï¼šä½¿ç”¨ç®€åŒ–è®¡ç®—
                return isLeap ? 29 : 30;
            }
        }
        
        // è·å–å¹²æ”¯å¹´
        function getGanZhi(year) {
            try {
                const lunar = Lunar.fromYmd(year, 1, 1);
                return lunar.getYearInGanZhi();
            } catch (e) {
                const gan = ['ç”²','ä¹™','ä¸™','ä¸','æˆŠ','å·±','åºš','è¾›','å£¬','ç™¸'];
                const zhi = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];
                const offset = year - 1900 + 36;
                return gan[offset % 10] + zhi[offset % 12];
            }
        }
        
        // è·å–å†œå†å¹´çš„é—°æœˆ
        function getLeapMonth(year) {
            try {
                const lunar = Lunar.fromYmd(year, 1, 1);
                return lunar.getLeapMonth();
            } catch (e) {
                return 0;
            }
        }
        
        // è·å–å†œå†å¹´æ€»å¤©æ•°
        function getLunarYearDays(year) {
            try {
                let days = 0;
                for (let m = 1; m <= 12; m++) {
                    const lunar = Lunar.fromYmd(year, m, 1);
                    days += lunar.getMonthDays();
                }
                // åŠ é—°æœˆå¤©æ•°
                const leapMonth = getLeapMonth(year);
                if (leapMonth > 0) {
                    const leapLunar = Lunar.fromYmd(year, leapMonth, 1);
                    days += leapLunar.getMonthDays();
                }
                return days;
            } catch (e) {
                return 354;
            }
        }
        
        // å†œå†è½¬é˜³å†ï¼ˆä½¿ç”¨Lunaråº“ï¼‰
        function lunarToSolar(year, month, day, isLeap) {
            try {
                // ä½¿ç”¨Lunar.fromYmdï¼Œå¦‚æœæ˜¯é—°æœˆéœ€è¦ç‰¹æ®Šå¤„ç†
                let lunar;
                if (isLeap) {
                    // é—°æœˆï¼šå…ˆè·å–è¯¥å¹´é—°å‡ æœˆï¼Œç¡®è®¤ä¸ä¼ å…¥çš„monthä¸€è‡´
                    const leapMonth = Lunar.fromYmd(year, 1, 1).getLeapMonth();
                    if (leapMonth === month) {
                        // å¯¹äºlunar-javascriptåº“ï¼Œé—°æœˆæ—¥æœŸç›´æ¥ç”¨fromYmdå³å¯æ­£ç¡®å¤„ç†
                        lunar = Lunar.fromYmd(year, month, day);
                    } else {
                        // ä¸æ˜¯é—°æœˆï¼ŒæŒ‰æ™®é€šæœˆå¤„ç†
                        lunar = Lunar.fromYmd(year, month, day);
                    }
                } else {
                    lunar = Lunar.fromYmd(year, month, day);
                }
                const solar = lunar.getSolar();
                return new Date(solar.getYear(), solar.getMonth() - 1, solar.getDay());
            } catch (e) {
                console.error('å†œå†è½¬æ¢é”™è¯¯:', e);
                return null;
            }
        }
        
        // å…¬å†è½¬å†œå†ï¼ˆä½¿ç”¨Lunaråº“ï¼‰
        function solarToLunar(solarDate) {
            try {
                const solar = Solar.fromYmd(solarDate.getFullYear(), solarDate.getMonth() + 1, solarDate.getDate());
                const lunar = solar.getLunar();
                return {
                    year: lunar.getYear(),
                    month: lunar.getMonth(),
                    day: lunar.getDay(),
                    isLeap: lunar.isLeap()
                };
            } catch (e) {
                console.error('é˜³å†è½¬æ¢é”™è¯¯:', e);
                return {year: 1900, month: 1, day: 1, isLeap: false};
            }
        }
        
        // è®¡ç®—å†œå†æ—¥æœŸåœ¨å¹´å†…çš„å¤©æ•°
        function getLunarDayOfYear(year, month, day, isLeap) {
            let days = 0;
            const leapMonth = getLeapMonth(year);
            
            for (let m = 1; m < month; m++) {
                days += getLunarDaysInMonth(year, m, false);
                if (leapMonth === m) {
                    days += getLunarDaysInMonth(year, m, true);
                }
            }
            
            if (isLeap && leapMonth === month) {
                days += getLunarDaysInMonth(year, month, false);
            } else if (leapMonth > 0 && leapMonth < month) {
                days += getLunarDaysInMonth(year, leapMonth, true);
            }
            
            days += day;
            return days;
        }
        
        // æ˜¾ç¤ºè½¬æ¢åçš„é˜³å†
        function showConvertedSolar() {
            const year = parseInt(document.getElementById('lunarYear').value);
            const month = parseInt(document.getElementById('lunarMonth').value);
            const day = parseInt(document.getElementById('lunarDay').value);
            const display = document.getElementById('solarDisplay');
            
            if (!year || !month || !day) {
                display.classList.remove('show');
                return;
            }
            
            // è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ä¸ºé—°æœˆ
            const leapMonth = getLeapMonth(year);
            const isLeap = (leapMonth === month);
            
            const solarDate = lunarToSolar(year, month, day, isLeap);
            if (solarDate) {
                const dateStr = solarDate.getFullYear() + 'å¹´' + 
                               (solarDate.getMonth() + 1) + 'æœˆ' + 
                               solarDate.getDate() + 'æ—¥';
                document.getElementById('convertedSolar').textContent = dateStr;
                display.classList.add('show');
            }
        }
        
        // åˆ‡æ¢è¾“å…¥æ¨¡å¼
        function switchMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('solarBtn').classList.toggle('active', mode === 'solar');
            document.getElementById('lunarBtn').classList.toggle('active', mode === 'lunar');
            
            // æ˜¾ç¤ºå¯¹åº”è¾“å…¥åŒºåŸŸ
            document.getElementById('solarInput').classList.toggle('active', mode === 'solar');
            document.getElementById('lunarInput').classList.toggle('active', mode === 'lunar');
        }
        
        // ==========================================
        // ã€Šå®¿æ›œç»ã€‹å€¼æ—¥æ˜Ÿå®¿ç®—æ³•
        // æ ¹æ®ã€Šæ–‡æ®Šå¸ˆåˆ©è©è¨åŠè¯¸ä»™æ‰€è¯´å‰å‡¶æ—¶æ—¥å–„æ¶å®¿æ›œç»ã€‹
        // ==========================================
        
        // ã€Šå®¿æ›œç»ã€‹äºŒåå…«å®¿å€¼æ—¥é¡ºåºï¼ˆä¸ä¸­æ–¹ä¼ ç»Ÿé¡ºåºä¸åŒï¼‰
        // æˆ¿æ—¥å…”ä¸ºé¦–ï¼ŒæŒ‰å°åº¦å¤©æ–‡é¡ºåºæ’åˆ—
        const suYaoJingOrder = [
            3,   // æˆ¿æ—¥å…” (ç´¢å¼•3)
            4,   // å¿ƒæœˆç‹ (ç´¢å¼•4)
            5,   // å°¾ç«è™ (ç´¢å¼•5)
            6,   // ç®•æ°´è±¹ (ç´¢å¼•6)
            7,   // æ–—æœ¨ç¬ (ç´¢å¼•7)
            8,   // ç‰›é‡‘ç‰› (ç´¢å¼•8)
            9,   // å¥³åœŸè  (ç´¢å¼•9)
            10,  // è™šæ—¥é¼  (ç´¢å¼•10)
            11,  // å±æœˆç‡• (ç´¢å¼•11)
            12,  // å®¤ç«çŒª (ç´¢å¼•12)
            13,  // å£æ°´è² (ç´¢å¼•13)
            14,  // å¥æœ¨ç‹¼ (ç´¢å¼•14)
            15,  // å¨„é‡‘ç‹— (ç´¢å¼•15)
            16,  // èƒƒåœŸé›‰ (ç´¢å¼•16)
            17,  // æ˜´æ—¥é¸¡ (ç´¢å¼•17)
            18,  // æ¯•æœˆä¹Œ (ç´¢å¼•18)
            19,  // è§œç«çŒ´ (ç´¢å¼•19)
            20,  // å‚æ°´çŒ¿ (ç´¢å¼•20)
            21,  // äº•æœ¨çŠ´ (ç´¢å¼•21)
            22,  // é¬¼é‡‘ç¾Š (ç´¢å¼•22)
            23,  // æŸ³åœŸç (ç´¢å¼•23)
            24,  // æ˜Ÿæ—¥é©¬ (ç´¢å¼•24)
            25,  // å¼ æœˆé¹¿ (ç´¢å¼•25)
            26,  // ç¿¼ç«è›‡ (ç´¢å¼•26)
            27,  // è½¸æ°´èš“ (ç´¢å¼•27)
            0,   // è§’æœ¨è›Ÿ (ç´¢å¼•0)
            1,   // äº¢é‡‘é¾™ (ç´¢å¼•1)
            2    // æ°åœŸè²‰ (ç´¢å¼•2)
        ];
        
        // ã€Šå®¿æ›œç»ã€‹å¯†æ³•ï¼šè®¡ç®—å¹´ä»½çš„æ˜Ÿå®¿åŸºå‡†å€¼
        // ä»¥7æ—¥ä¸ºå‘¨æœŸï¼Œé…åˆäº”è¡Œç†è®º
        function getYearBaseStar(year) {
            // ä»¥1900å¹´ä¸ºåŸºå‡†å¹´ï¼Œæˆ¿å®¿(ç´¢å¼•0)ä¸ºèµ·ç‚¹
            // æŒ‰ç…§ã€Šå®¿æ›œç»ã€‹çš„7æ›œå‘¨æœŸè®¡ç®—
            const baseYear = 1900;
            const yearDiff = year - baseYear;
            
            // ã€Šå®¿æ›œç»ã€‹ç®—æ³•ï¼šå¹´ä»½å¯¹åº”æ˜Ÿå®¿æŒ‰28æ—¥å‘¨æœŸå¾ªç¯
            // åŒæ—¶è€ƒè™‘7æ›œï¼ˆæ—¥ã€æœˆã€ç«ã€æ°´ã€æœ¨ã€é‡‘ã€åœŸï¼‰çš„å½±å“
            const baseIndex = (yearDiff * 5) % 28; // æ¯å¹´åç§»5ä½
            return baseIndex;
        }
        
        // åŸºäºå†œå†æ—¥æœŸè·å–å€¼æ—¥æ˜Ÿå®¿ï¼ˆã€Šå®¿æ›œç»ã€‹ç®—æ³•ï¼‰
        function getStarByLunarDate(lunarYear, lunarMonth, lunarDay, isLeap = false) {
            // 1. è·å–è¯¥å¹´æ­£æœˆåˆä¸€å¯¹åº”çš„æ˜Ÿå®¿åŸºå‡†
            const yearBase = getYearBaseStar(lunarYear);
            
            // 2. è®¡ç®—è¿™ä¸€å¤©åœ¨å†œå†å¹´å†…çš„å¤©æ•°
            const dayOfYear = getLunarDayOfYear(lunarYear, lunarMonth, lunarDay, isLeap);
            
            // 3. è®¡ç®—å€¼æ—¥æ˜Ÿå®¿åœ¨ã€Šå®¿æ›œç»ã€‹é¡ºåºä¸­çš„ä½ç½®
            const suYaoIndex = (yearBase + dayOfYear - 1) % 28;
            
            // 4. è½¬æ¢ä¸ºstarDataæ•°ç»„çš„ç´¢å¼•
            const starIndex = suYaoJingOrder[suYaoIndex];
            
            return starIndex;
        }
        
        // è·å–ã€Šå®¿æ›œç»ã€‹æ˜Ÿå®¿åç§°ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰
        function getSuYaoJingStarName(index) {
            const names = [
                'æˆ¿æ—¥å…”', 'å¿ƒæœˆç‹', 'å°¾ç«è™', 'ç®•æ°´è±¹', 'æ–—æœ¨ç¬', 'ç‰›é‡‘ç‰›', 'å¥³åœŸè ',
                'è™šæ—¥é¼ ', 'å±æœˆç‡•', 'å®¤ç«çŒª', 'å£æ°´è²', 'å¥æœ¨ç‹¼', 'å¨„é‡‘ç‹—', 'èƒƒåœŸé›‰',
                'æ˜´æ—¥é¸¡', 'æ¯•æœˆä¹Œ', 'è§œç«çŒ´', 'å‚æ°´çŒ¿', 'äº•æœ¨çŠ´', 'é¬¼é‡‘ç¾Š', 'æŸ³åœŸç',
                'æ˜Ÿæ—¥é©¬', 'å¼ æœˆé¹¿', 'ç¿¼ç«è›‡', 'è½¸æ°´èš“', 'è§’æœ¨è›Ÿ', 'äº¢é‡‘é¾™', 'æ°åœŸè²‰'
            ];
            return names[index];
        }
        
        // è®¡ç®—æ˜Ÿå®¿ï¼ˆã€Šå®¿æ›œç»ã€‹ç®—æ³•ï¼‰
        function calculateStar() {
            let starIndex;
            let displayDate;
            let lunarYear, lunarMonth, lunarDay, isLeap;
            
            if (currentMode === 'solar') {
                const dateInput = document.getElementById('birthDate').value;
                
                if (!dateInput) {
                    alert('è¯·å…ˆé€‰æ‹©ç”Ÿæ—¥ï¼');
                    return;
                }
                
                const date = new Date(dateInput);
                displayDate = date;
                
                // ä½¿ç”¨ç²¾ç¡®çš„å…¬å†è½¬å†œå†ç®—æ³•
                const lunar = solarToLunar(date);
                lunarYear = lunar.year;
                lunarMonth = lunar.month;
                lunarDay = lunar.day;
                isLeap = lunar.isLeap;
                
            } else {
                lunarYear = parseInt(document.getElementById('lunarYear').value);
                lunarMonth = parseInt(document.getElementById('lunarMonth').value);
                lunarDay = parseInt(document.getElementById('lunarDay').value);
                
                if (!lunarYear || !lunarMonth || !lunarDay) {
                    alert('è¯·å…ˆé€‰æ‹©å®Œæ•´çš„å†œå†ç”Ÿæ—¥ï¼');
                    return;
                }
                
                // è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ä¸ºé—°æœˆ
                const leapMonth = getLeapMonth(lunarYear);
                isLeap = (leapMonth === lunarMonth);
                
                const solarDate = lunarToSolar(lunarYear, lunarMonth, lunarDay, isLeap);
                if (!solarDate) {
                    alert('æ—¥æœŸè½¬æ¢å‡ºé”™ï¼Œè¯·æ£€æŸ¥è¾“å…¥ï¼');
                    return;
                }
                displayDate = solarDate;
            }
            
            // ã€Šå®¿æ›œç»ã€‹å€¼æ—¥æ˜Ÿå®¿ç®—æ³•
            starIndex = getStarByLunarDate(lunarYear, lunarMonth, lunarDay, isLeap);
            
            // è°ƒè¯•ä¿¡æ¯ï¼šæ˜¾ç¤ºè®¡ç®—å‚æ•°
            console.log('æ˜Ÿå®¿è®¡ç®—å‚æ•°:', {
                mode: currentMode,
                lunarYear, lunarMonth, lunarDay, isLeap,
                dayOfYear: getLunarDayOfYear(lunarYear, lunarMonth, lunarDay, isLeap),
                starIndex
            });
            
            // æ˜¾ç¤ºåŠ è½½
            document.getElementById('inputSection').style.display = 'none';
            document.getElementById('loading').classList.add('show');
            
            // æ¨¡æ‹Ÿè®¡ç®—å»¶è¿Ÿ
            setTimeout(() => {
                showResult(starIndex);
            }, 1500);
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult(index) {
            const star = starData[index];
            
            document.getElementById('loading').classList.remove('show');
            document.getElementById('resultSection').classList.add('show');
            
            // å¡«å……æ•°æ®
            document.getElementById('starIcon').textContent = star.icon;
            document.getElementById('starName').textContent = star.name;
            document.getElementById('starPinyin').textContent = star.pinyin;
            document.getElementById('starAnimal').textContent = star.animal;
            document.getElementById('starMeaning').textContent = star.meaning;
            document.getElementById('starPersonality').textContent = star.personality;
            document.getElementById('fortuneCareer').textContent = star.fortune.career;
            document.getElementById('fortuneWealth').textContent = star.fortune.wealth;
            document.getElementById('fortuneLove').textContent = star.fortune.love;
            
            // é«˜äº®æ˜Ÿå®¿åˆ—è¡¨
            document.querySelectorAll('.star-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });
            
            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        // é‡æ–°æµ‹ç®—
        function resetCalc() {
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('inputSection').style.display = 'block';
            document.getElementById('birthDate').value = '';
            document.getElementById('lunarYear').value = '';
            document.getElementById('lunarMonth').value = '';
            document.getElementById('lunarDay').value = '';
            document.getElementById('solarDisplay').classList.remove('show');
            
            document.querySelectorAll('.star-item').forEach(item => {
                item.classList.remove('active');
            });
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // åˆ†äº«ç»“æœ
        function shareResult() {
            const starName = document.getElementById('starName').textContent;
            const shareText = `âœ¨ æˆ‘çš„å¤©å‘½æ˜Ÿå®¿æ˜¯ã€${starName}ã€‘âœ¨\n\nå¿«æ¥æµ‹æµ‹ä½ çš„äºŒåå…«æ˜Ÿå®¿å§ï¼\n`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'äºŒåå…«æ˜Ÿå®¿æµ‹ç®—',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // å¤åˆ¶åˆ°å‰ªè´´æ¿
                navigator.clipboard.writeText(shareText + window.location.href).then(() => {
                    alert('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                });
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>